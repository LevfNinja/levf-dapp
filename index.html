<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <!-- og/twitter meta tags below -->
    <meta property="og:site_name" content="Levf" />
    <meta property="og:type" content="website" />
    <meta name="title" content="Levf" />
    <meta property="og:title" content="Levf" />
    <meta name="description" content="Levf is a leveraged yield farming and risk adjustment protocol that bridges the capital and risk limitations of participants, creating additional opportunities for both." />
    <meta property="og:description" content="Levf is a leveraged yield farming and risk adjustment protocol" />
    <meta property="og:url" content="https://levf.finance" />
    <meta property="al:web:url" content="https://levf.finance" />
    <meta property="og:image" content="https://levf.finance/assets/images/levf.png" />
    <meta name="robots" content="all" />
    <title>Levf</title>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="assets/images/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="assets/images/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/images/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/images/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/images/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/images/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="assets/images/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/images/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicons/favicon-32x32.png">
    <link rel="shortcut icon" type="image/png" sizes="96x96" href="assets/images/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicons/favicon-16x16.png">
    <!-- Start css -->
    <!-- Sweet Alert css -->
    <link href="assets/plugins/sweet-alert2/sweetalert2.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/icons.css" rel="stylesheet" type="text/css">
    <link href="assets/css/style.css" rel="stylesheet" type="text/css">
    <link href="assets/css/custom.css" rel="stylesheet" type="text/css">
    <link href="assets/fonts/inter.css" rel="stylesheet" type="text/css">
    <!-- End css -->
    <style>
    .hide
    {
        display: none !important;
    }

    .table-logo-right
    {
        position: absolute;
        right: 0;
        height: 32px;
    }

    .graph-logo-right
    {
        position: absolute;
        top: 40px;
        right: 16px;
        height: 32px;
        opacity: 25%;
    }

    .graph-loading
    {
        position:absolute;
        left:50%;
        transform:translate(-50%, 0);
    }

    .media-levf-logo
    {
        height: 50px;
    }

    .rounded,
    .btn,
    .card,
    .card-header
    {
        border-radius: .50rem!important;
    }

    .dot::after
    {
        content: " ";
        margin: 0px 3px;
        color: rgb(207, 214, 228);
    }

    .h42
    {
        height: 42px;
        width: 42px;
    }
    /* No greater than 900px, no less than 400px */

    @media (max-width:1200px) and (min-width:1000px)
    {
        .topbar .togglebar
        {
            font-size: 14px;
        }
    }

    @media (max-width:999px)
    {
        .topbar .togglebar .hide999
        {
            display: none;
        }
    }

    .masthead
    {
        padding: 2rem;
        z-index: 0;
        top: calc(5% + 20px);
        text-align: center;
        left: 50%;
        transform: translateX(-50%);
        height: auto;
    }

    .masthead .masthead-content h1
    {
        font-size: 2.75rem;
    }

    .masthead .masthead-content p
    {
        font-size: 1.2rem;
        max-width: 46rem;
    }

    .masthead .masthead-content p strong
    {
        font-weight: 700;
    }

    @media (min-width: 500px)
    {
        .masthead
        {
            top: 50%;
            padding: 2rem;
            z-index: 0;
        }
        .masthead .masthead-content h1
        {
            font-size: 3.75rem;
        }
    }

    @media (min-width: 768px)
    {
        .masthead
        {
            min-height: 0;
            position: fixed;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 0;
            left: 50%;
        }
        .masthead .masthead-content
        {
            padding-left: 0;
            padding-right: 0;
        }
        .masthead .masthead-content h1
        {
            font-size: 4.75rem;
        }
        .masthead .masthead-content p
        {
            font-size: 1.3rem;
        }
    }

    .btn.mont
    {
        padding: .5rem 1rem;
        font-size: 1.25rem;
        line-height: 1.5;
        border-radius: .3rem;
        margin-left: 10px;
        margin-right: 10px;
    }

    .onTop
    {
        position: relative;
        z-index: 1000;
    }

    .midLevel
    {
        position: fixed;
        z-index: -10;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        height: 100%;
    }

    a.btn
    {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
    }

    .coming-soon .countdown-block
    {
        display: inline-block;
        padding: 10px;
    }
    </style>
</head>

<body class="vertical-layout">
    <!-- Start Containerbar -->
    <div id="containerbar">
        <!-- Start Rightbar -->
        <div class="rightbar">
            <!-- Start Topbar Mobile -->
            <div class="topbar-mobile">
                <div class="row align-items-center">
                    <div class="col-md-12">
                        <div class="mobile-logobar">
                            <a href="#home" class="mobile-logo"><img src="assets/images/levf-mobile.png" class="img-fluid" alt="logo"></a>
                        </div>
                        <div class="mobile-togglebar">
                            <ul class="list-inline mb-0">
                                <li class="list-inline-item">
                                    <div class="topbar-toggle-icon">
                                        <a class="topbar-toggle-hamburger menu-hamburger" href="javascript:void();" id="mobileMenuBtn">
                                            <span class="iconbar">
                                                <i class="ri-menu-2-line menu-hamburger-collapse"></i>
                                                <i class="ri-close-line menu-hamburger-close"></i>
                                            </span>
                                        </a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Topbar Mobile -->
            <!-- Start Topbar -->
            <div class="topbar">
                <!-- Start row -->
                <div class="row align-items-center">
                    <!-- Start col -->
                    <div class="col-md-12 align-self-center">
                        <div class="togglebar active">
                            <a href="#home" data-toggle="tab" onclick="closeMobileMenuIfActive()" class="hideOnMobile"><img src="assets/images/levf-white.png" class="img-fluid" alt="logo" width="75" height="75"></a>
                            <ul class="vertical-menu">
                                <li>
                                    <a href="#dashboard" data-toggle="tab" onclick="closeMobileMenuIfActive()"> <img src="assets/images/iconDashboard.png" class="img-fluid">
                                        <br><span data-i18n="rightbar.dashboard">Dashboard</span> </a>
                                </li>
                                <li>
                                    <a href="#liquidity" data-toggle="tab" onclick="closeMobileMenuIfActive()"> <img src="assets/images/iconLiquidityPool.png" class="img-fluid">
                                        <br><span data-i18n="rightbar.pools">Pools</span> </a>
                                </li>
                                <li>
                                    <a href="#redeem" data-toggle="tab" onclick="closeMobileMenuIfActive()"> <img src="assets/images/iconRedeem.png" class="img-fluid">
                                        <br><span data-i18n="rightbar.redeem">Redeem</span> </a>
                                </li>
                                <li>
                                    <a href="https://levfninja.gitbook.io/levf-finance/" target="_blank" onclick="closeMobileMenuIfActive()"> <img src="assets/images/iconDocs.png" class="img-fluid">
                                        <br><span data-i18n="rightbar.documentation">Documentation</span> </a>
                                </li>
                            </ul>
                        </div>
                        <div class="infobar">
                            <ul class="list-inline mb-0">
                                <li class="list-inline-item">
                                    <div class="dropdown">
                                        <button id="languageBtn" class="languageDropdownBtn">English ˅</button>
                                        <div id="languageDropdown" class="dropdownContent">
                                            <button onclick="i18next.changeLanguage('en')" class="chooseLanguageBtn">English</button>
                                            <button onclick="i18next.changeLanguage('zh_CN')" class="chooseLanguageBtn">中文(简体)</button>
                                        </div>
                                    </div>
                                </li>
                                <li class="list-inline-item">
                                    <div class="profilebar">
                                        <button id="btnNetwork" class="btn btn-outline-connect hide" style="opacity: 1;" disabled> <span id="spanNetwork">Kovan</span> </button>
                                        <button id="btnConnectWallet" class="btn btn-connect" type="button"> <i id="iconConnectWallet" class="mdi mdi-ethereum mr-2"></i> <span id="spanConnectWallet" class="spinner-border spinner-border-sm hide" role="status" aria-hidden="true"></span> <text data-i18n="rightbar.connectWallet">Connect Wallet</text> </button>
                                        <button id="btnConnected" class="btn btn-outline-connect hide" type="button"> <i class="mdi mdi-ethereum mr-2"></i> <span id="spanConnected"></span> </button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- End col -->
                </div>
                <!-- End row -->
            </div>
            <!-- End Topbar -->
            <!-- Start Socialbar -->
            <div id="socialBar" class="socialbar">
                <div class="align-items-center">
                    <ul>
                        <li>
                            <a href="https://t.me/levffinance8" target="_blank"><img src="assets/images/telegram.png" class="h42" alt="telegram"></a>
                        </li>
                        <li>
                            <a href="https://twitter.com/levffinance" target="_blank"><img src="assets/images/twitter.png" class="h42" alt="twitter"></a>
                        </li>
                        <li>
                            <a href="https://levffinance.medium.com" target="_blank"><img src="assets/images/medium.png" class="h42" alt="medium"></a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- End Socialbar -->
            <div class="tab-content">
                <div class="tab-pane fade position-relative active" id="home">
                    <div class="masthead card m-b-30">
                        <div class="masthead-content py-5 py-md-0">
                            <h1><img class="mr-3" src="assets/images/levf.png" alt="Levf" width="200"></h1>
                            <p style="line-height: 1.5em" class="mb-5" data-i18n="rightbar.homeContent"> Levf is a leveraged yield farming and risk adjustment protocol that bridges the capital and risk limitations of participants, creating additional opportunities for both. </p>
                            <div> <a href="https://levfninja.gitbook.io/levf-finance/" target="_blank" class="btn btn-secondary btn-lg mont mb-2" data-i18n="rightbar.learnMore">Learn More</a> <a href="#dashboard" class="btn btn-primary btn-lg mont mb-2" data-i18n="rightbar.dashboard">Dashboard</a> </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade show" id="dashboard">
                    <!-- Start Breadcrumbbar -->
                    <div class="breadcrumbbar">
                        <div class="row align-items-center" style="padding-bottom: 20px;">
                            <div class="col-md-12 col-lg-12">
                                <div class="card-header">
                                    <h4 class="page-title" style="text-align: center;" data-i18n="rightbar.announcement">Announcement</h4>
                                    <text data-i18n="rightbar.announcementMsg">We are happy and excited to announce that we are going to include more exciting strategies to the platform contract. Hence, we will be introducing V2 which will bring more benefits to the community. Stay tuned and meanwhile, please withdraw your funds from the DAI Treasury Pool and Uniswap DAI/LFI LP Treasury Pool.</text>
                                </div>
                            </div>
                        </div>
                        <div class="row align-items-center">
                            <div class="col-md-8 col-lg-8">
                                <div class="card-header">
                                    <h4 class="page-title" data-i18n="rightbar.dashboard">Dashboard</h4>
                                    <div class="breadcrumb-list">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#home" data-i18n="rightbar.home">Home</a></li>
                                            <li class="breadcrumb-item"><a href="#dashboard" data-i18n="rightbar.dashboard">Dashboard</a></li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4">
                                <div class="widgetbar">
                                    <button class="btn btn-primary refresh"><i class="fa fa-refresh fa-fw mr-2"></i><a data-i18n="rightbar.refresh">Refresh</a></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Breadcrumbbar -->
                    <!-- Start Contentbar -->
                    <div class="contentbar">
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="row margin-lrt">
                                        <!-- Start col -->
                                        <div class="col-lg-12 col-xl-6 m-b-30">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row align-items-center no-gutters">
                                                        <div class="col-8">
                                                            <p data-i18n="rightbar.tvl">Total Value Locked</p>
                                                            <h4 id="txtTotalValueLockedDashboard"
                                                                class="card-title mb-0 font-40" data-i18n="rightbar.na">
                                                                -NA-</h4>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End col -->
                                        <!-- Start col -->
                                        <div class="col-lg-12 col-xl-6 m-b-30">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row align-items-center no-gutters">
                                                        <div class="col-8">
                                                            <p class="font-15" data-i18n="rightbar.lfiPrice">LFI Price
                                                            </p>
                                                            <h4 id="txtTokenLFIPriceDashboard"
                                                                class="card-title mb-0  font-40"
                                                                data-i18n="rightbar.na">-NA-</h4>
                                                        </div>
                                                        <div class="col-4 text-right"> <span><img
                                                                    src="assets/images/lfi.png" alt="LFI" width="48"
                                                                    height="48"></span> </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End col -->

                                        <!-- Start col -->
                                        <div class="col-lg-12 col-xl-6 m-b-30">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row align-items-center no-gutters">
                                                        <div class="col-12">
                                                            <p class="font-15" data-i18n="rightbar.availableSupply">
                                                                Utilisation / Available Treasury Pool Supply</p>
                                                            <h4 id="txtAvailablePoolSupplyDashboard"
                                                                class="card-title mb-0" data-i18n="rightbar.na">-NA-
                                                            </h4>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End col -->
                                        <!-- Start col -->
                                        <div class="col-lg-12 col-xl-6 m-b-30">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row align-items-center no-gutters">
                                                        <div class="col-8">
                                                            <p class="font-15" data-i18n="rightbar.reservePool">Reserve
                                                                Pool</p>
                                                            <h4 id="txtReservePoolDashboard" class="card-title mb-0"
                                                                data-i18n="rightbar.na">-NA-</h4>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End col -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End row -->
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="col-xl-12 margin-lrt">
                                        <div class="col-xl-12 h5">
                                            <div class="card-title" data-i18n="rightbar.epoch">
                                                Epoch
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xl-6 m-b-30">

                                                <div class="card">
                                                    <div class="card-body">
                                                        <div class="row">
                                                            <div class="col-lg-12 col-xl-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div class="row align-items-start no-gutters">
                                                                            <div class="col-8">
                                                                                <p class="font-15"
                                                                                    data-i18n="rightbar.currentEpoch">
                                                                                    Current Epoch</p>
                                                                                <h4 id="txtCurrentEpoch"
                                                                                    class="card-title mb-0 text-nowrap"
                                                                                    data-i18n="rightbar.na">-NA-</h4>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-12 col-xl-6">
                                                                <h5 data-i18n="rightbar.epochEndingIn">Epoch Ending
                                                                    In:</h5>
                                                                <p id="txtCurrentEpochEndIn" data-i18n="rightbar.na">
                                                                    -NA-</p>

                                                                <div class="progress">
                                                                    <div id="progressBarCurrentEpoch"
                                                                        class="progress-bar progress-bar-striped progress-bar-animated bg-primary"
                                                                        role="progressbar" style="width: 0%;"
                                                                        aria-valuenow="75" aria-valuemin="0"
                                                                        aria-valuemax="100"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="col-xl-6 m-b-30">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <div class="row">
                                                            <div class="col-lg-12 col-xl-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div class="row align-items-start no-gutters">
                                                                            <div class="col-8">
                                                                                <p class="font-15"
                                                                                    data-i18n="rightbar.nextEpoch">
                                                                                    Next Epoch</p>
                                                                                <h4 id="txtNextEpoch"
                                                                                    class="card-title mb-0 text-nowrap"
                                                                                    data-i18n="rightbar.na">-NA-</h4>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-12 col-xl-6">
                                                                <div class="media mb-3"> <span
                                                                        class="iconbar iconbar-md bg-primary text-white rounded align-self-center mr-3"><i
                                                                            class="ri-calendar-check-line align-unset"></i></span>
                                                                    <div class="media-body">
                                                                        <h5 data-i18n="rightbar.nextEpochStart">Next
                                                                            Epoch Start</h5>
                                                                        <p id="txtNextEpochStartDate"
                                                                            data-i18n="rightbar.na">-NA-</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End row -->
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="col-xl-12 margin-lrt">
                                        <div class="col-xl-12 h5">
                                            <div class="card-title" data-i18n="rightbar.portfolio">
                                                Portfolio
                                            </div>
                                        </div>
                                        <div class="row row-eq-height">
                                            <!-- Start col -->
                                            <div class="col-lg-12 col-xl-4  m-b-30">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <div class="row align-items-center no-gutters">
                                                            <div class="col-8">
                                                                <p class="font-15"><a id="txtTokenLDaiLink"
                                                                        target='_blank'>LDai</a></p>
                                                                <h4 id="txtTokenLDai" class="card-title mb-0"
                                                                    data-i18n="rightbar.na">
                                                                    -NA-</h4>
                                                            </div>
                                                            <div class="col-4 text-right"> <span><img
                                                                        src="assets/images/ldai.png" alt="LDai"
                                                                        width="48" height="48"></span> </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-12 col-xl-4 m-b-30">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <div class="row align-items-center no-gutters">
                                                            <div class="col-8">
                                                                <p class="font-15"><a id="txtTokenLUniDaiLfiLink"
                                                                        target='_blank'>DAI/LFI LUniLp</a></p>
                                                                <h4 id="txtTokenLUniDaiLfi" class="card-title mb-0"
                                                                    data-i18n="rightbar.na">-NA-</h4>
                                                            </div>
                                                            <div class="col-4 text-right"> <span><img
                                                                        src="assets/images/luniswap.png"
                                                                        alt="DAI/LFI LUniLp" width="48"
                                                                        height="48"></span> </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-12 col-xl-4 m-b-30">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <div class="row align-items-center no-gutters">
                                                            <div class="col-8">
                                                                <div class="card-title font-15">
                                                                    <a id="txtTokenLFILink" target='_blank'>LFI</a>
                                                                    <i class="fa fa-copy" role="button"
                                                                        onclick="copyToClipboard('LFI')"></i>
                                                                    <span tabindex="-1" class="text-primary font-18"
                                                                        style="top:-1px; position:relative;"
                                                                        role="button" data-toggle="popover"
                                                                        data-trigger="manual" title="LFI"
                                                                        data-content="LFI is the governance token for Levf. There are only 100,000 LFI and they will be distributed to Levf liquidity providers over 20 weeks. LFI can be redeemed together with liquidity provided at the end of every Epoch."
                                                                        data-html="true" data-original-title="LFI"
                                                                        data-i18n="[data-content]rightbar.lfiPopover"><i
                                                                            class="fa fa-info-circle"></i></span></h5>
                                                                </div>
                                                                <h4 id="txtTokenLFI" class="card-title mb-0"
                                                                    data-i18n="rightbar.na">
                                                                    -NA-</h4>
                                                            </div>
                                                            <div class="col-4 text-right"> <span><img
                                                                        src="assets/images/lfi.png" alt="LFI" width="48"
                                                                        height="48"></span> </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- End row -->
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="col-xl-12 margin-lrt">
                                        <div class="col-xl-12 h5">
                                            <div class="card-title" data-i18n="rightbar.estimatedEarnings">
                                                Estimated Earnings
                                            </div>
                                        </div>
                                        <div class="row">
                                            <!-- Start col -->
                                            <div class="col-lg-12 col-xl-6 m-b-30">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <div class="row align-items-center no-gutters">
                                                            <div class="col-8">
                                                                <p class="font-15" data-i18n="rightbar.redeemableLfi">
                                                                    Redeemable LFI</p>
                                                                <h4 id="txtTokenLFIRedeemable" class="card-title mb-0"
                                                                    data-i18n="rightbar.na">-NA-</h4>
                                                            </div>
                                                            <div class="col-4 text-right"> <span><img
                                                                        src="assets/images/lfi.png" alt="LFI" width="48"
                                                                        height="48"></span> </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-12 col-xl-6 m-b-30">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <div class="row align-items-center no-gutters">
                                                            <div class="col-8">
                                                                <div class="card-title font-15">
                                                                    <a data-i18n="rightbar.estimatedLfi">Estimated LFI
                                                                        (Current
                                                                        Epoch)</a>
                                                                    <span id="infoEstimatedLfi" tabindex="-1"
                                                                        class="text-primary font-18"
                                                                        style="top:-1px; position:relative;"
                                                                        role="button" data-toggle="popover"
                                                                        data-trigger="manual"
                                                                        data-content="Estimated LFI is an estimate of LFI rewards based on the liquidity provided as a proportion of the total liquidity pool currently and period of time left for the epoch."
                                                                        data-html="true"
                                                                        data-original-title="Estimated LFI"><i
                                                                            class="fa fa-info-circle"></i></span></h5>
                                                                </div>
                                                                <h4 id="txtTokenLFIEstimated" class="card-title mb-0"
                                                                    data-i18n="rightbar.na">-NA-</h4>
                                                            </div>
                                                            <div class="col-4 text-right"> <span><img
                                                                        src="assets/images/lfi.png" alt="LFI" width="48"
                                                                        height="48"></span> </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <!-- End row -->
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="col-xl-12 margin-lrt">
                                        <div class="col-xl-12 h5">
                                            <div class="card-title" data-i18n="rightbar.contractAddresses">
                                                Contract Addresses
                                            </div>
                                        </div>
                                        <div class="row">
<!-- Start col -->
<div class="col-lg-12 col-xl-4 m-b-30">
    <div class="card">
        <div class="card-body">
            <div class="row align-items-center no-gutters">
                <div class="col-8">
                    <p class="font-15">LFI</p>
                    <h6 class="card-title mb-0"><a id="txtDashboardContractAddressLfi" data-i18n="rightbar.na" target='_blank'>-NA-</a></h6>
                </div>
                <div class="col-4 text-right"> <span><img src="assets/images/lfi.png" alt="LFI" width="48" height="48"></span> </div>
            </div>
        </div>
    </div>
</div>
<!-- End col -->
<!-- Start col -->
<div class="col-lg-12 col-xl-4 m-b-30">
    <div class="card">
        <div class="card-body">
            <div class="row align-items-center no-gutters">
                <div class="col-8">
                    <p class="font-15" data-i18n="rightbar.daiTreasuryPool">DAI Treasury Pool</p>
                    <h6 class="card-title mb-0"><a id="txtDashboardContractAddressDaiTreasuryPool" data-i18n="rightbar.na" target='_blank'>-NA-</a></h6>
                </div>
                <div class="col-4 text-right"> <span><img src="assets/images/dai.png" alt="DAI" width="48" height="48"></span> </div>
            </div>
        </div>
    </div>
</div>
<!-- End col -->
<!-- Start col -->
<div class="col-lg-12 col-xl-4 m-b-30">
    <div class="card">
        <div class="card-body">
            <div class="row align-items-center no-gutters">
                <div class="col-8">
                    <p class="font-15" data-i18n="rightbar.uniDaiLfiPool">DAI/LFI UNI LP Token Pool</p>
                    <h6 class="card-title mb-0"><a id="txtDashboardContractAddressUniDaiLfiPool" data-i18n="rightbar.na" target='_blank'>-NA-</a></h6>
                </div>
                <div class="col-4 text-right"> <span><img src="assets/images/uniswap.png" alt="Uniswap" width="48" height="48"></span> </div>
            </div>
        </div>
    </div>
</div>
<!-- End col -->
<!-- Start col -->
<div id="divDashboardContractAddressYearnDaiVault" class="col-lg-12 col-xl-4 m-b-30" style="display: none;">
    <div class="card">
        <div class="card-body">
            <div class="row align-items-center no-gutters">
                <div class="col-8">
                    <p class="font-15" data-i18n="rightbar.yearnDaiVault">Yearn DAI Vault</p>
                    <h6 class="card-title mb-0"><a id="txtDashboardContractAddressYearnDaiVault" data-i18n="rightbar.na" target='_blank'>-NA-</a></h6>
                </div>
                <div class="col-4 text-right"> <span><img src="assets/images/yearn.png" alt="Yearn" width="48" height="48"><img src="assets/images/dai.png" alt="DAI" width="48" height="48"></span> </div>
            </div>
        </div>
    </div>
</div>
<!-- End col -->
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <!-- End row -->
                    </div>
                    <!-- End Contentbar -->
                </div>
                <div class="tab-pane fade" id="liquidity">
                    <!-- Start Breadcrumbbar -->
                    <div class="breadcrumbbar">
                        <div class="row align-items-center" style="padding-bottom: 20px;">
                            <div class="col-md-12 col-lg-12">
                                <div class="card-header">
                                    <h4 class="page-title" style="text-align: center;" data-i18n="rightbar.announcement">Announcement</h4>
                                    <text data-i18n="rightbar.announcementMsg">We are happy and excited to announce that we are going to include more exciting strategies to the platform contract. Hence, we will be introducing V2 which will bring more benefits to the community. Stay tuned and meanwhile, please withdraw your funds from the DAI Treasury Pool and Uniswap DAI/LFI LP Treasury Pool.</text>
                                </div>
                            </div>
                        </div>
                        <div class="row align-items-center">
                            <div class="col-md-8 col-lg-8">
                                <div class="card-header">
                                    <h4 class="page-title" data-i18n="rightbar.pools">Pools</h4>
                                    <div class="breadcrumb-list">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#home" data-i18n="rightbar.home">Home</a></li>
                                            <li class="breadcrumb-item"><a href="#liquidity" data-i18n="rightbar.pools">Pools</a></li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4">
                                <div class="widgetbar">
                                    <button class="btn btn-primary refresh"><i class="fa fa-refresh fa-fw mr-2"></i><a data-i18n="rightbar.refresh">Refresh</a></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Breadcrumbbar -->
                    <!-- Start Contentbar -->
                    <div class="contentbar">
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="row margin-lrt">
                                        <!-- Start col -->
                                        <div class="col-lg-12 col-xl-6 m-b-30">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row align-items-center no-gutters">
                                                        <div class="col-8">
                                                            <p data-i18n="rightbar.tvl">Total Value Locked</p>
                                                            <h4 id="txtTotalValueLockedPools"
                                                                class="card-title mb-0 font-40" data-i18n="rightbar.na">
                                                                -NA-</h4>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End col -->
                                        <!-- Start col -->
                                        <div class="col-lg-12 col-xl-6 m-b-30">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row align-items-center no-gutters">
                                                        <div class="col-8">
                                                            <p class="font-15" data-i18n="rightbar.lfiPrice">LFI Price
                                                            </p>
                                                            <h4 id="txtTokenLFIPricePools"
                                                                class="card-title mb-0  font-40"
                                                                data-i18n="rightbar.na">-NA-</h4>
                                                        </div>
                                                        <div class="col-4 text-right"> <span><img
                                                                    src="assets/images/lfi.png" alt="LFI" width="48"
                                                                    height="48"></span> </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End col -->

                                        <!-- Start col -->
                                        <div class="col-lg-12 col-xl-6 m-b-30">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row align-items-center no-gutters">
                                                        <div class="col-12">
                                                            <p class="font-15" data-i18n="rightbar.availableSupply">
                                                                Utilisation / Available Treasury Pool Supply</p>
                                                            <h4 id="txtAvailablePoolSupplyPools" class="card-title mb-0"
                                                                data-i18n="rightbar.na">-NA-
                                                            </h4>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End col -->
                                        <!-- Start col -->
                                        <div class="col-lg-12 col-xl-6 m-b-30">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row align-items-center no-gutters">
                                                        <div class="col-8">
                                                            <p class="font-15" data-i18n="rightbar.reservePool">Reserve
                                                                Pool</p>
                                                            <h4 id="txtReservePoolPools" class="card-title mb-0"
                                                                data-i18n="rightbar.na">-NA-</h4>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End col -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End row -->
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="col-xl-12 margin-lrt">
                                        <div class="col-xl-12 h5">
                                            <div class="card-title" data-i18n="rightbar.assetPools">
                                                Asset Supply Treasury Pools
                                            </div>
                                        </div>
                                        <div class="row">
                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center">
                                                    <div class="card-body">
                                                        <h5 class="card-title font-18"><a id="txtTreasuryPoolDaiLink"
                                                                target='_blank' data-i18n="rightbar.daiTreasuryPool">DAI
                                                                Treasury Pool</a></h5>
                                                        <p class="card-text"> <img src="assets/images/dai.png"
                                                                class="h42 mb-1" alt="DAI"></p>
                                                        <p>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.earn">Earn:</text><b
                                                                class="float-right">LFI</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtTreasuryPoolDaiAPYLfi" class="float-right"
                                                                data-i18n="rightbar.na">-NA-</b><br>
                                                            <span id="spanTreasuryPoolDaiAPYDai" style="display: none;">
                                                                <text class="float-left" data-i18n="rightbar.apyDai">APY
                                                                    (DAI):</text><b id="txtTreasuryPoolDaiAPYDai"
                                                                    class="float-right" data-i18n="rightbar.na">-NA-</b>
                                                            </span>
                                                        </p>
                                                        <button id="btnTreasuryPoolDepositDai" class="btn btn-primary"
                                                            data-i18n="rightbar.depositDai">Deposit DAI</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->

                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center">
                                                    <div class="card-body">
                                                        <div class="card-title font-18">
                                                            <h5>
                                                                <a id="txtTreasuryPoolUniDaiLfiLink" target='_blank'
                                                                    data-i18n="rightbar.uniDaiLfiPool">DAI/LFI UNI LP
                                                                    Token Pool </a>
                                                                <span id="infoUniDaiLfi" tabindex="-1"
                                                                    class="text-primary font-18"
                                                                    style="top:-8px; position:relative;" role="button"
                                                                    data-toggle="popover" data-trigger="manual"
                                                                    title="DAI/LFI UNI V2 LP Token"
                                                                    data-content="DAI/LFI UNI V2 LP Tokens can be acquired by adding liquidity to the DAI/LFI liquidity pair on Uniswap <a href='https://app.uniswap.org/#/add/' target='_blank'>here</a>."
                                                                    data-html="true"
                                                                    data-original-title="DAI/LFI UNI V2 LP Token"><i
                                                                        class="fa fa-info-circle"></i></span>
                                                            </h5>
                                                        </div>
                                                        <p class="card-text"> <img src="assets/images/uniswap.png"
                                                                class="h42 mb-1" alt="UNI"></p>
                                                        <p>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.earn">Earn:</text><b
                                                                class="float-right">LFI</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtTreasuryPoolUniDaiLfiAPYLfi" class="float-right"
                                                                data-i18n="rightbar.na">-NA-</b><br>
                                                        </p>
                                                        <button id="btnTreasuryPoolDepositUniDaiLfi"
                                                            class="btn btn-primary"
                                                            data-i18n="rightbar.depositUniDaiLfi">Deposit DAI/LFI UNI
                                                            LP</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center">
                                                    <div class="card-body">
                                                        <h5 class="card-title font-18"
                                                            data-i18n="rightbar.sushiDaiLfiPool">DAI/LFI
                                                            SUSHI LP Token Pool</h5>
                                                        <p class="card-text"> <img src="assets/images/sushi.png"
                                                                class="h42 mb-1" alt="UNI"></p>
                                                        <p>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.earn">Earn:</text><b
                                                                class="float-right">LFI</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtTreasuryPoolSushiDaiLfiAPYLfi"
                                                                class="float-right" data-i18n="rightbar.na">-NA-</b><br>
                                                        </p>
                                                        <button id="btnTreasuryPoolDepositUniDaiLfi"
                                                            class="btn btn-primary" data-i18n="rightbar.comingSoon"
                                                            disabled>Coming Soon!</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                    </div>
                                </div>
                            </div>



                        </div>
                        <!-- End row -->
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="col-xl-12 margin-lrt">
                                        <div class="col-xl-12 h5">
                                            <div class="card-title" data-i18n="rightbar.farmingPools">
                                                Farming Pools (20x Leverage)
                                            </div>
                                        </div>
                                        <div class="col-xl-12 h6" id="farmingPoolsHeaderMsg" style="display: none;">
                                            <div class="card-title" data-i18n="rightbar.farmingPoolsHeaderMsg">
                                                Please be patient, the farming pools will be launched after the contract
                                                audit is
                                                completed.
                                            </div>
                                        </div>
                                        <div class="row row-eq-height">
                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center">
                                                    <div class="card-body">
                                                        <h5 class="card-title font-18"><a id="txtYearnDaiPoolLink"
                                                                target='_blank' data-i18n="rightbar.yearn">Yearn</a>
                                                        </h5>
                                                        <p class="card-text"> <img src="assets/images/yearn.png"
                                                                class="h42 mb-1" alt="Yearn"><img id="imgYearnDaiPool"
                                                                src="assets/images/dai.png" class="h42 mb-1" alt="DAI"
                                                                style="display: none;"></p>
                                                        <p id="divYearnDaiPoolApy" style="display: none;">
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtYearnDaiPoolAPY" class="float-right"
                                                                data-i18n="rightbar.na">-NA-</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.leveragedApy">Leveraged
                                                                APY:</text><b id="txtYearnDaiPoolLevAPY"
                                                                class="float-right" data-i18n="rightbar.na">-NA-</b>
                                                        </p>
                                                        <button id="btnYearnPoolDepositDai" class="btn btn-primary"
                                                            data-i18n="rightbar.comingSoon" disabled>Coming
                                                            Soon!</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center">
                                                    <div class="card-body">
                                                        <h5 class="card-title font-18" data-i18n="rightbar.curve">Curve
                                                        </h5>
                                                        <p class="card-text"> <img src="assets/images/curve.png"
                                                                class="h42 mb-1" alt="Curve"><img
                                                                src="assets/images/dai.png" class="h42 mb-1" alt="DAI"
                                                                style="display: none;"></p>
                                                        <p id="divCurveDaiPoolApy" style="display: none;">
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtCurveDaiPoolAPY" class="float-right"
                                                                data-i18n="rightbar.na">-NA-</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.leveragedApy">Leveraged
                                                                APY:</text><b id="txtCurveDaiPoolLevAPY"
                                                                class="float-right" data-i18n="rightbar.na">-NA-</b>
                                                        </p>
                                                        <button id="btnCurvePoolDepositDai" class="btn btn-primary"
                                                            data-i18n="rightbar.comingSoon" disabled>Coming
                                                            Soon!</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center">
                                                    <div class="card-body">
                                                        <h5 class="card-title font-18" data-i18n="rightbar.harvest">
                                                            Harvest</h5>
                                                        <p class="card-text"> <img src="assets/images/harvest.png"
                                                                class="h42 mb-1" alt="Harvest"><img
                                                                src="assets/images/dai.png" class="h42 mb-1" alt="DAI"
                                                                style="display: none;"></p>
                                                        <p id="divHarvestDaiPoolApy" style="display: none;">
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtHarvestDaiPoolAPY" class="float-right"
                                                                data-i18n="rightbar.na">-NA-</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.leveragedApy">Leveraged
                                                                APY:</text><b id="txtHarvestDaiPoolLevAPY"
                                                                class="float-right" data-i18n="rightbar.na">-NA-</b>
                                                        </p>
                                                        <button id="btnHarvestPoolDepositDai" class="btn btn-primary"
                                                            data-i18n="rightbar.comingSoon" disabled>Coming
                                                            Soon!</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center">
                                                    <div class="card-body">
                                                        <h5 class="card-title font-18" data-i18n="rightbar.compound">
                                                            Compound</h5>
                                                        <p class="card-text"> <img src="assets/images/compound.png"
                                                                class="h42 mb-1" alt="Compound"><img
                                                                src="assets/images/dai.png" class="h42 mb-1" alt="DAI"
                                                                style="display: none;"></p>
                                                        <p id="divCompoundDaiPoolApy" style="display: none;">
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtCompoundDaiPoolAPY" class="float-right"
                                                                data-i18n="rightbar.na">-NA-</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.leveragedApy">Leveraged
                                                                APY:</text><b id="txtCompoundDaiPoolLevAPY"
                                                                class="float-right" data-i18n="rightbar.na">-NA-</b>
                                                        </p>
                                                        <button id="btnCompoundPoolDepositDai" class="btn btn-primary"
                                                            data-i18n="rightbar.comingSoon" disabled>Coming
                                                            Soon!</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center m-b-30">
                                                    <div class="card-body">
                                                        <h5 class="card-title font-18" data-i18n="rightbar.aave">Aave
                                                        </h5>
                                                        <p class="card-text"> <img src="assets/images/aave.png"
                                                                class="h42 mb-1" alt="Harvest"><img
                                                                src="assets/images/dai.png" class="h42 mb-1" alt="DAI"
                                                                style="display: none;"></p>
                                                        <p id="divAaveDaiPoolApy" style="display: none;">
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtAaveDaiPoolAPY" class="float-right"
                                                                data-i18n="rightbar.na">-NA-</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.leveragedApy">Leveraged
                                                                APY:</text><b id="txtAaveDaiPoolLevAPY"
                                                                class="float-right" data-i18n="rightbar.na">-NA-</b>
                                                        </p>
                                                        <button id="btnAavePoolDepositDai" class="btn btn-primary"
                                                            data-i18n="rightbar.comingSoon" disabled>Coming
                                                            Soon!</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-md-6 col-lg-4 col-xl-4 m-b-30">
                                                <div class="card text-center">
                                                    <div class="card-body">
                                                        <h5 class="card-title font-18" data-i18n="rightbar.cream">Cream
                                                        </h5>
                                                        <p class="card-text"> <img src="assets/images/cream.png"
                                                                class="h42 mb-1" alt="Harvest"><img
                                                                src="assets/images/dai.png" class="h42 mb-1" alt="DAI"
                                                                style="display: none;"></p>
                                                        <p id="divCreamDaiPoolApy" style="display: none;">
                                                            <text class="float-left"
                                                                data-i18n="rightbar.apy">APY:</text><b
                                                                id="txtCreamDaiPoolAPY" class="float-right"
                                                                data-i18n="rightbar.na">-NA-</b><br>
                                                            <text class="float-left"
                                                                data-i18n="rightbar.leveragedApy">Leveraged
                                                                APY:</text><b id="txtCreamDaiPoolLevAPY"
                                                                class="float-right" data-i18n="rightbar.na">-NA-</b>
                                                        </p>
                                                        <button id="btnCreamPoolDepositDai" class="btn btn-primary"
                                                            data-i18n="rightbar.comingSoon" disabled>Coming
                                                            Soon!</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <!-- End row -->
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="col-xl-12 margin-lrt">
                                        <div class="col-xl-12 h5">
                                            <div class="card-title" data-i18n="rightbar.contractAddresses">
                                                Contract Addresses
                                            </div>
                                        </div>
                                        <div class="row">
                                                                        <!-- Start col -->
                            <div class="col-lg-12 col-xl-4 m-b-30">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row align-items-center no-gutters">
                                            <div class="col-8">
                                                <p class="font-15">LFI</p>
                                                <h6 class="card-title mb-0"><a id="txtPoolsContractAddressLfi" data-i18n="rightbar.na" target='_blank'>-NA-</a></h6>
                                            </div>
                                            <div class="col-4 text-right"> <span><img src="assets/images/lfi.png" alt="LFI" width="48" height="48"></span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End col -->
                            <!-- Start col -->
                            <div class="col-lg-12 col-xl-4 m-b-30">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row align-items-center no-gutters">
                                            <div class="col-8">
                                                <p class="font-15" data-i18n="rightbar.daiTreasuryPool">DAI Treasury Pool</p>
                                                <h6 class="card-title mb-0"><a id="txtPoolsContractAddressDaiTreasuryPool" data-i18n="rightbar.na" target='_blank'>-NA-</a></h6>
                                            </div>
                                            <div class="col-4 text-right"> <span><img src="assets/images/dai.png" alt="DAI" width="48" height="48"></span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End col -->
                            <!-- Start col -->
                            <div class="col-lg-12 col-xl-4 m-b-30">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row align-items-center no-gutters">
                                            <div class="col-8">
                                                <p class="font-15" data-i18n="rightbar.uniDaiLfiPool">DAI/LFI UNI LP Token Pool</p>
                                                <h6 class="card-title mb-0"><a id="txtPoolsContractAddressUniDaiLfiPool" data-i18n="rightbar.na" target='_blank'>-NA-</a></h6>
                                            </div>
                                            <div class="col-4 text-right"> <span><img src="assets/images/uniswap.png" alt="Uniswap" width="48" height="48"></span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End col -->
                            <!-- Start col -->
                            <div id="divPoolsContractAddressYearnDaiVault" class="col-lg-12 col-xl-4 m-b-30" style="display: none;">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row align-items-center no-gutters">
                                            <div class="col-8">
                                                <p class="font-15" data-i18n="rightbar.yearnDaiVault">Yearn DAI Vault</p>
                                                <h6 class="card-title mb-0"><a id="txtPoolsContractAddressYearnDaiVault" data-i18n="rightbar.na" target='_blank'>-NA-</a></h6>
                                            </div>
                                            <div class="col-4 text-right"> <span><img src="assets/images/yearn.png" alt="Yearn" width="48" height="48"><img src="assets/images/dai.png" alt="DAI" width="48" height="48"></span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End col -->
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <!-- End row -->
                    </div>
                    <!-- End Contentbar -->
                </div>
                <div class="tab-pane fade" id="redeem">
                    <!-- Start Breadcrumbbar -->
                    <div class="breadcrumbbar">
                        <div class="row align-items-center" style="padding-bottom: 20px;">
                            <div class="col-md-12 col-lg-12">
                                <div class="card-header">
                                    <h4 class="page-title" style="text-align: center;" data-i18n="rightbar.announcement">Announcement</h4>
                                    <text data-i18n="rightbar.announcementMsg">We are happy and excited to announce that we are going to include more exciting strategies to the platform contract. Hence, we will be introducing V2 which will bring more benefits to the community. Stay tuned and meanwhile, please withdraw your funds from the DAI Treasury Pool and Uniswap DAI/LFI LP Treasury Pool.</text>
                                </div>
                            </div>
                        </div>
                        <div class="row align-items-center">
                            <div class="col-md-8 col-lg-8">
                                <div class="card-header">
                                    <h4 class="page-title" data-i18n="rightbar.redeem">Redeem</h4>
                                    <div class="breadcrumb-list">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#home" data-i18n="rightbar.home">Home</a></li>
                                            <li class="breadcrumb-item"><a href="#redeem" data-i18n="rightbar.redeem">Redeem</a></li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4">
                                <div class="widgetbar">
                                    <button class="btn btn-primary refresh"><i class="fa fa-refresh fa-fw mr-2"></i><a data-i18n="rightbar.refresh">Refresh</a></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Breadcrumbbar -->
                    <!-- Start Contentbar -->
                    <div class="contentbar">
                        <div class="h5">
                            <div class="card-header" data-i18n="rightbar.assetPools">
                                Asset Treasury Pools
                            </div>
                        </div>
                        <!-- Start row -->
                        <div class="row m-b-10">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="row margin-lrt">
                                        <div class="col-xl-12">
                                            <div class="">
                                                <div class="card-body">
                                                    <div class="row row-eq-height">
                                                        <div class="col-lg-12 col-xl-3 text-center d-flex align-items-center col-12">
                                                            <div class="col-12 text-center m-b-30">
                                                            <h5 class="card-title font-18" data-i18n="rightbar.daiTreasuryPool">DAI Pool</h5>
                                                            <p class="card-text"> <img src="assets/images/dai.png" class="h42 mb-1" alt="DAI"></p>
                                                        </div>
                                                        </div>
                                                        <div class="col-lg-12 col-xl-9">
                                                            <div class="row m-b-30">
                                                                <div class="col-lg-12 col-xl-6">
                                                                    <div class="card h-100">
                                                                        <div class="card-body">
                                                                            <div class="row align-items-start no-gutters m-b-30">
                                                                                <div class="col-8">
                                                                                    <p class="font-15">LDai</p>
                                                                                    <h4 id="txtRedeemLDai" class="card-title mb-0 text-nowrap" data-i18n="rightbar.na">-NA-</h4> </div>
                                                                                <div class="col-4 text-right"> <span><img src="assets/images/ldai.png" alt="LDai" width="48" height="48"></span> </div>

                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-12">
                                                                                    <button id="btnTreasuryPoolRedeemDai" class="btn btn-primary" data-i18n="rightbar.redeemDai">Redeem DAI</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 col-xl-6">
                                                                    <div class="card h-100">
                                                                        <div class="card-body" data-i18n="rightbar.redeemLiquidityInfo"> Liquidity provided can be redeemed at anytime. However, you give up any LFI rewards accumulated for the current epoch if liquidity is redeemed before the end of epoch. </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row m-b-30">
                                                                <div class="col-lg-12 col-xl-6">
                                                                    <div class="card h-100">
                                                                        <div class="card-body">
                                                                            <div class="row align-items-start no-gutters m-b-30">
                                                                                <div class="col-8">
                                                                                    <p class="font-15">LFI</p>
                                                                                    <h4 id="txtRedeemLFI_Dai" class="card-title mb-0 text-nowrap" data-i18n="rightbar.na">-NA-</h4> </div>
                                                                                <div class="col-4 text-right"> <span><img src="assets/images/lfi.png" alt="LDai" width="48" height="48"></span> </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-12">
                                                                                    <button id="btnPoolRedeemLFI_Dai" class="btn btn-primary" data-i18n="rightbar.redeemLfi">Redeem LFI</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 col-xl-6">
                                                                    <div class="card h-100">
                                                                        <div class="card-body" data-i18n="rightbar.redeemLfiInfo"> LFI rewards will be available for redemption only at the end of each epoch. LFI not redeemed will be accumulated and available to redeem at any time. </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="col-xl-12 m-b-30" style="display: none;">
                                            <div class="">
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-lg-12 col-xl-2 text-center">
                                                            <h5 class="card-title font-18" data-i18n="rightbar.redeemLfiDaiPool">LFI - DAI Pool</h5>
                                                            <p class="card-text"> <img src="assets/images/lfi.png" class="h42 mb-1" alt="LFI"><br> </p>

                                                        </div>
                                                        <div class="col-lg-12 col-xl-10">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- End row -->
                        <!-- Start row -->
                        <div class="row m-b-50">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="row margin-lrt">

                                        <div class="col-xl-12">
                                            <div class="">
                                                <div class="card-body">
                                                    <div class="row row-eq-height">
                                                        <div class="col-lg-12 col-xl-3 text-center d-flex align-items-center col-12">
                                                            <div class="col-12 text-center m-b-30">
                                                            <h5 class="card-title font-18" data-i18n="rightbar.uniDaiLfiPool">DAI/LFI UNI LP Pool</h5>
                                                            <p class="card-text"> <img src="assets/images/uniswap.png" class="h42 mb-1" alt="UNI"></p>
                                                        </div>
                                                        </div>
                                                        <div class="col-lg-12 col-xl-9">
                                                            <div class="row m-b-30">
                                                                <div class="col-lg-12 col-xl-6">
                                                                    <div class="card h-100">
                                                                        <div class="card-body">
                                                                            <div class="row align-items-start no-gutters m-b-30">
                                                                                <div class="col-8">
                                                                                    <p class="font-15">DAI/LFI LUniLp</p>
                                                                                    <h4 id="txtRedeemLUniDaiLfi" class="card-title mb-0 text-nowrap" data-i18n="rightbar.na">-NA-</h4> </div>
                                                                                <div class="col-4 text-right"> <span><img src="assets/images/luniswap.png" alt="LUniDaiLfi" width="48" height="48"></span> </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-12">
                                                                                    <button id="btnTreasuryPoolRedeemUniDaiLfi" class="btn btn-primary" data-i18n="rightbar.redeemUniDaiLfi">Redeem DAI/LFI UNI LP</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 col-xl-6">
                                                                    <div class="card h-100">
                                                                        <div class="card-body" data-i18n="rightbar.redeemLiquidityInfo"> Liquidity provided can be redeemed at anytime. However, you give up any LFI rewards accumulated for the current epoch if liquidity is redeemed before the end of epoch. </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="row m-b-30">
                                                                <div class="col-lg-12 col-xl-6">
                                                                    <div class="card h-100">
                                                                        <div class="card-body">
                                                                            <div class="row align-items-start no-gutters m-b-30">
                                                                                <div class="col-8">
                                                                                    <p class="font-15">LFI</p>
                                                                                    <h4 id="txtRedeemLFI_UniDaiLfi" class="card-title mb-0 text-nowrap" data-i18n="rightbar.na">-NA-</h4> </div>
                                                                                <div class="col-4 text-right"> <span><img src="assets/images/lfi.png" alt="LDai" width="48" height="48"></span> </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-12">
                                                                                    <button id="btnPoolRedeemLFI_UniDaiLfi" class="btn btn-primary" data-i18n="rightbar.redeemLfi">Redeem LFI</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 col-xl-6">
                                                                    <div class="card h-100">
                                                                        <div class="card-body" data-i18n="rightbar.redeemLfiInfo"> LFI rewards will be available for redemption only at the end of each epoch. LFI not redeemed will be accumulated and available to redeem at any time. </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xl-12 m-b-30" style="display: none;">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-lg-12 col-xl-2 text-center">
                                                            <h5 class="card-title font-18" data-i18n="rightbar.redeemLfiUniDaiLfiPool">LFI - DAI/LFI UNI LP Pool</h5>
                                                            <p class="card-text"> <img src="assets/images/lfi.png" class="h42 mb-1" alt="LFI"><br> </p>

                                                        </div>
                                                        <div class="col-lg-12 col-xl-10">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- End row -->
                        <div class="h5" id="headerFarmingPoolRedeem" style="display: none;">
                            <div class="card-header" data-i18n="rightbar.farmingPools">
                                Farming Pools
                            </div>
                        </div>
                        <!-- Start row -->
                        <div class="row" id="divYearnDaiRedeem" style="display: none;">
                            <div class="col-md-12">
                                <div class="card m-b-30">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-lg-12 col-xl-2 text-center">
                                                <h5 class="card-title font-18" data-i18n="rightbar.yearnDaiVault">Yearn DAI Vault</h5>
                                                <p class="card-text"> <img src="assets/images/yearn.png" class="h42 mb-1" alt="Yearn"><img src="assets/images/dai.png" class="h42 mb-1" alt="DAI"><br> </p>
                                                <button id="btnYearnPoolRedeemDai" class="btn btn-primary" data-i18n="rightbar.redeemDai">Redeem DAI</button>
                                            </div>
                                            <div class="col-lg-12 col-xl-10">
                                                <div class="row m-t-10">
                                                    <div class="col-lg-12 col-xl-5">
                                                        <div class="card h-100">
                                                            <div class="card-body">
                                                                <div class="row align-items-start no-gutters">
                                                                    <div class="col-8">
                                                                        <p class="font-15">BDai</p>
                                                                        <h4 id="txtYearnPoolRedeemBDai" class="card-title mb-0 text-nowrap" data-i18n="rightbar.na">-NA-</h4> </div>
                                                                    <div class="col-4 text-right"> <span><img src="assets/images/ldai.png" alt="BDai" width="48" height="48"></span> </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-xl-7">
                                                        <div class="card h-100">
                                                            <div class="card-body" data-i18n="rightbar.redeemFarmingInfo"> DAI can be redeemed from the farming pool at anytime. A 10% tax will be levied on the net profit with proceeds going to the reserve pool. The borrowed liquidity will also be returned to the Asset Treasury Pool along with the interest owed. </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End row -->
                    </div>
                    <!-- End Contentbar -->
                </div>
                <div class="tab-pane fade" id="docs">
                    <!-- Start Breadcrumbbar -->
                    <div class="breadcrumbbar">
                        <div class="row align-items-center">
                            <div class="col-md-8 col-lg-8">
                                <div class="card-header">
                                    <h4 class="page-title">Docs</h4>
                                    <div class="breadcrumb-list">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#home">Home</a></li>
                                            <li class="breadcrumb-item"><a href="#docs">Docs</a></li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Breadcrumbbar -->
                    <!-- Start Contentbar -->
                    <div class="contentbar">
                        <!-- Start row -->
                        <div class="row">
                            <!-- Start col -->
                            <div class="col-lg-12">
                                <div class="card m-b-30">
                                    <div class="card-body">
                                        <h1>Levf Finance - Leverage yield farming risk adjustment protocol</h1>
                                        Levf bridges the capital and risk limitations of participants, creating additional opportunities for both.<br><br>
                                        Liquidity providers can supply assets to interest-bearing supply pools to earn high interest on their assets.<br><br>
                                        Leverage yield farmers can provide accepted collateral for the protocol to leverage yield farm cross-protocol on behalf of the leverage yield farmer.<br><br>
                                        Suppliers of leverage get interest-bearing supply tokens. Leverage yield farmer pays interest in exchange for leveraged yield farming. For the additional risk, leverage yield farmers can earn an even higher APY.<br><br>
                                        Leverage farmers keep tokens farmed, not dumped/converted to the underlying currency.<br><br>
                                        Levf can generate high lending rates for assets by enabling the leverage yield farmers to take on leverage by borrowing from asset supply pools and paying the asset's interest rate. Leverage yield farmers effectively increase their yield farming and trading fees APY.<br><br>
                                        Interest on asset supply is determined by the rising interest rate curve. Interest rates range from 5% to 100% APY according to utilization of pool.<br><br>
                                        This ensures that leveraged yield farmers can leverage yield farm profitably, and also sufficient liquidity at all times for treasury pool stakers to unstake.<br><br>

                                        <h4>Epochs</h4>
                                        Epochs are time periods of 1 week, and is used to calculate distribution of LFI for liquidity mining. LFI rewards are set aside per pool for each given epoch. Number of LFI liquidity providers are entitled to is calculated based on the amount of liquidity provided multiplied by time staked as a proportion of total liquidity of the pool. If liquidity is unstaked during the epoch, LFI rewards accrued for that epoch are forfeited and distributed equally to the rest of the liquidity providers.<br><br>

                                        <h4>Insurance Fund</h4>
                                        The insurance fund is to insure asset suppliers against individual platform risk of farming pools.<br><br>
                                        Net profit on leverage yield farmed taxed 10% with proceeds going to insurance fund upon settlement.<br><br>
                                        Levf tokens staked are entitled to the insurance fund, which pays out when the fund reaches a certain threshold.<br><br>

                                        <h4>Asset supply treasury pools</h4>
                                        Although initially launching with DAI pools only, the model will be replicated for the following assets in the near term.<br><br>
                                        <h5>Asset supply:</h5>
                                        1. DAI<br>
                                        2. USDT<br>
                                        3. USDC<br>
                                        4. ETH<br>
                                        5. WBTC<br><br>

                                        <h4>Farming Pools</h4>
                                        1. Yearn<br>
                                        2. Harvest<br>
                                        3. Uniswap<br>
                                        4. Sushiswap<br>
                                        5. Curve<br>
                                        6. Balancer<br><br>

                                        <h4>Levf token</h4>
                                        Total token supply: 100000 LFI<br><br>
                                        Liquidity mining: 75% of total token supply<br><br>
                                        Team, developers, and initial backers: 25% of token supply (tokens to be unlocked alongside liquidity mining)<br><br>
                                        The liquidity mining phase will be over 20 epochs. With 3750 tokens distributed each epoch across liquidity pools.<br><br>
                                        Levf tokens will be rewarded to incentivize asset supply liquidity pools and leverage yield farming.<br><br>
                                        They will have the following utility:<br>
                                        1. Vote in governance polls.<br>
                                        2. Create governance proposals.<br>
                                        3. Decide changes in interest rates.<br>
                                        4. Vote on new protocols to adapt to.<br>
                                        5. Owner of the insurance fund.<br>
                                        6. Stake for payout from the insurance fund.<br>
                                        7. Own the smart contracts.<br>
                                        8. Decide on new features.<br>
                                        9. Stake for additional leverage.

                                        <p id="docsContractAddresses"></p>
                                    </div>
                                </div>
                                <!-- End Contentbar -->
                            </div>
                        </div>
                        <!-- Start Footerbar -->
                        <div class="footerbar">
                            <footer class="footer">
                                <p class="mb-0">© 2021 Levf - All Rights Reserved.</p>
                            </footer>
                        </div>
                        <!-- End Footerbar -->
                    </div>
                    <!-- End Rightbar -->
                </div>
            </div>
        </div>
        <!-- End Containerbar -->
    </div>
    <!-- End... containerbar?-->
    <!-- Start Modals -->
    <!-- Start Levf Alert Modal -->
    <div class="modal fade" id="levfAlertPopup" data-backdrop="static" tabindex="-1" aria-hidden="true" style="z-index:1060;">
        <div class="modal-dialog slideInDown  animated">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="txtLevfAlertHeader">Levf Alert!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body">
                    <p id="txtLevfAlert"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" data-i18n="levfAlertPopup.confirm">Got it, thanks!</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Levf Alert Modal -->
    <!-- begin connect wallet modal -->
    <div class="modal fade" id="modalConnectWallet" data-backdrop="static" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="modalConnectWallet.title">Connect Your Wallet</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row">
                            <div id="connectMetamaskMobileMsg" class="col-lg-6 col-md-12" style="display: none; padding-bottom: 15px;">
                                <p data-i18n="[html]modalConnectWallet.connectMetamaskMobileMsg">Tap the button below to <b>Open Metamask.</b> Please access this site on Metamask's in-app browser for a seamless experience.</p>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" data-dismiss="modal" onclick="connectWallet('metamask')"> <img src="assets/images/logo-metamask-32.png" alt="">MetaMask </button>
                            </div>
                            <!-- <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('fortmatic')"> <img src="assets/images/logo-fortmatic-32.png" alt="">Fortmatic </button>
                            </div> -->
                        </div>
                        <!-- <div class="row">
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('authereum')"> <img src="assets/images/logo-authereum-32.png" alt="">Authereum </button>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('coinbase')"> <img src="assets/images/logo-coinbase-32.png" alt="">Coinbase </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('ledger')"> <img src="assets/images/logo-ledger-32.png" alt="">Ledger </button>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('portis')"> <img src="assets/images/logo-portis-32.png" alt="">Portis </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('squarelink')"> <img src="assets/images/logo-squarelink-32.png" alt="">Squarelink </button>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('torus')"> <img src="assets/images/logo-torus-32.png" alt="">Torus </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('trezor')"> <img src="assets/images/logo-trezor-32.png" alt="">Trezor </button>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <button class="btn btn-lg btn-wallet btn-block" disabled data-dismiss="modal" onclick="connectWallet('walletconnect')"> <img src="assets/images/logo-walletconnect-32.png" alt="">Wallet Connect </button>
                            </div>
                        </div> -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-lg" data-dismiss="modal" data-i18n="modalConnectWallet.cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end connect wallet modal -->
    <!-- begin deposit treasury pool modal -->
    <div class="modal fade" id="depositTreasuryPoolPopup" data-backdrop="static" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><img id="imgTreasuryPoolDepositTitle" src="assets/images/dai.png" class="h42" alt="dai"><text id="txtTreasuryPoolDepositTitle" data-i18n="depositTreasuryPoolPopup.title"> Deposit DAI</text></h5>
                    <button id="btnTreasuryPoolCancelAddLiquidity" type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <!-- Start row -->
                        <div class="row">
                            <!-- Start col -->
                            <div class="col">
                                <!-- Start card -->
                                <div class="card m-b-10">
                                    <!-- Start card body -->
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <text data-i18n="depositTreasuryPoolPopup.selectAmount">Select Amount</text>
                                            <a id="txtTreasuryPoolGetTokenLink" target='_blank' style="color: blue;"></a>
                                        </h5>
                                        <!-- Start row -->
                                        <div class="row">
                                            <!-- Start col -->
                                            <div class="col">
                                                <label id="txtTreasuryPoolAvailableToken" data-i18n="depositTreasuryPoolPopup.availableToken">Available DAI</label>
                                                <br>
                                                <h4 class="mt-1" id="txtTreasuryPoolDepositBalance" data-i18n="depositTreasuryPoolPopup.na">-NA-</h4>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-auto mb-3 mb-lg-0">
                                                <label data-i18n="depositTreasuryPoolPopup.usePercentAvailable">Use % Of Available Amount</label>
                                                <br>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-green amountPercent" data-from="treasuryPoolDepositBalance" data-to="txtTreasuryPoolDepositAmount" data-percent=".25">25% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-yellow amountPercent" data-from="treasuryPoolDepositBalance" data-to="txtTreasuryPoolDepositAmount" data-percent=".5">50% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-orange amountPercent" data-from="treasuryPoolDepositBalance" data-to="txtTreasuryPoolDepositAmount" data-percent=".75">75% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-red amountPercent" data-from="treasuryPoolDepositBalance" data-to="txtTreasuryPoolDepositAmount" data-percent="1.0">100% <i class="dripicons-arrow-right"></i></button>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-auto">
                                                <label for="txtTreasuryPoolDepositAmount" data-i18n="depositTreasuryPoolPopup.depositAmount">Deposit Amount</label>
                                                <br>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="txtTreasuryPoolDepositAmount" name="inputmask-currency" placeholder="0.00" style="text-align: right;">
                                                    <div class="input-group-append"> <span class="input-group-text" id="txtTreasuryPoolDepositToken">DAI</span> </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                        <!-- End row -->
                                    </div>
                                    <!-- End card body -->
                                </div>
                                <!-- End card -->
                            </div>
                            <!-- End col -->
                        </div>
                        <!-- End row -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btnTreasuryPoolAddLiquidity" type="button" class="btn btn-primary"><i class="fa fa-refresh fa-spin fa-fw mr-2 hide"></i><a data-i18n="depositTreasuryPoolPopup.confirmDeposit">Confirm Deposit</a></button>
                    <button id="btnTreasuryPoolCancelAddLiquidity2" type="button" class="btn btn-secondary btn-lg" data-dismiss="modal" data-i18n="depositTreasuryPoolPopup.cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end deposit treasury pool modal -->
    <!-- begin redeem treasury pool modal -->
    <div class="modal fade" id="redeemTreasuryPoolPopup" data-backdrop="static" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><img id="imgTreasuryPoolRedeemTitle" src="assets/images/dai.png" class="h42" alt="dai"><text id="txtTreasuryPoolRedeemTitle" data-i18n="redeemTreasuryPoolPopup.title"> Redeem DAI</text></h5>
                    <button id="btnTreasuryPoolCancelRemoveLiquidity" type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <!-- Start row -->
                        <div class="row">
                            <!-- Start col -->
                            <div class="col">
                                <!-- Start card -->
                                <div class="card m-b-10">
                                    <!-- Start card body -->
                                    <div class="card-body">
                                        <h5 class="card-title" data-i18n="redeemTreasuryPoolPopup.selectAmount">Select Amount</h5>
                                        <!-- Start row -->
                                        <div class="row">
                                            <!-- Start col -->
                                            <div class="col">
                                                <label id="txtTreasuryPoolHeldToken" data-i18n="redeemTreasuryPoolPopup.tokenHeld">LDai Held</label>
                                                <br>
                                                <h4 class="mt-1" id="txtTreasuryPoolRedeemBalance" data-i18n="redeemTreasuryPoolPopup.na">-NA-</h4> </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-auto mb-3 mb-lg-0">
                                                <label data-i18n="redeemTreasuryPoolPopup.redeemPercentAvailable">Redeem % Of Available Amount</label>
                                                <br>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-green amountPercent" data-from="treasuryPoolRedeemBalance" data-to="txtTreasuryPoolRedeemAmount" data-percent=".25">25% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-yellow amountPercent" data-from="treasuryPoolRedeemBalance" data-to="txtTreasuryPoolRedeemAmount" data-percent=".5">50% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-orange amountPercent" data-from="treasuryPoolRedeemBalance" data-to="txtTreasuryPoolRedeemAmount" data-percent=".75">75% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-red amountPercent" data-from="treasuryPoolRedeemBalance" data-to="txtTreasuryPoolRedeemAmount" data-percent="1.0">100% <i class="dripicons-arrow-right"></i></button>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-auto">
                                                <label for="txtTreasuryPoolRedeemAmount" data-i18n="redeemTreasuryPoolPopup.redeemAmount">Redemption Amount</label>
                                                <br>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="txtTreasuryPoolRedeemAmount" name="inputmask-currency" placeholder="0.00" style="text-align: right;">
                                                    <div class="input-group-append"> <span class="input-group-text" id="txtTreasuryPoolRedeemToken">LDai</span> </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                        <!-- End row -->
                                    </div>
                                    <!-- End card body -->
                                </div>
                                <!-- End card -->
                            </div>
                            <!-- End col -->
                        </div>
                        <!-- End row -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btnTreasuryPoolRemoveLiquidity" type="button" class="btn btn-primary"><i class="fa fa-refresh fa-spin fa-fw mr-2 hide"></i><a  data-i18n="redeemTreasuryPoolPopup.confirmRedeem">Confirm Redemption</a></button>
                    <button id="btnTreasuryPoolCancelRemoveLiquidity2" type="button" class="btn btn-secondary btn-lg" data-dismiss="modal" data-i18n="redeemTreasuryPoolPopup.cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end redeem treasury pool modal -->
    <!-- begin deposit farming pool modal -->
    <div class="modal fade" id="depositFarmingPoolPopup" data-backdrop="static" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><img src="assets/images/dai.png" class="h42" alt="dai"><text id="txtFarmingPoolDepositTitle" data-i18n="depositFarmingPoolPopup.title"> Deposit DAI</text></h5>
                    <button id="btnFarmingPoolCancelAddLiquidity" type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <!-- Start row -->
                        <div class="row">
                            <!-- Start col -->
                            <div class="col">
                                <!-- Start card -->
                                <div class="card m-b-10">
                                    <!-- Start card body -->
                                    <div class="card-body">
                                        <h5 class="card-title" data-i18n="depositFarmingPoolPopup.selectAmount">Select Amount</h5>
                                        <!-- Start row -->
                                        <div class="row">
                                            <!-- Start col -->
                                            <div class="col">
                                                <label id="txtFarmingPoolAvailableToken" data-i18n="depositFarmingPoolPopup.availableToken">Available DAI</label>
                                                <br>
                                                <h4 class="mt-1" id="txtFarmingPoolDepositBalance" data-i18n="depositFarmingPoolPopup.na">-NA-</h4>
                                                <br>
                                                <label id="txtFarmingPoolBorrowableToken" data-i18n="depositFarmingPoolPopup.availableTreasuryPoolToken">Available DAI in Treasury Pool</label>
                                                <br>
                                                <h4 class="mt-1" id="txtFarmingPoolBorrowableTokenBalance" data-i18n="depositFarmingPoolPopup.na">-NA-</h4> </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-auto mb-3 mb-lg-0">
                                                <label data-i18n="depositFarmingPoolPopup.usePercentAvailable">Use % Of Available Amount</label>
                                                <br>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-green amountPercent" data-from="farmingPoolDepositBalance" data-to="txtFarmingPoolDepositAmount" data-percent=".25">25% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-yellow amountPercent" data-from="farmingPoolDepositBalance" data-to="txtFarmingPoolDepositAmount" data-percent=".5">50% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-orange amountPercent" data-from="farmingPoolDepositBalance" data-to="txtFarmingPoolDepositAmount" data-percent=".75">75% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-red amountPercent" data-from="farmingPoolDepositBalance" data-to="txtFarmingPoolDepositAmount" data-percent="1.0">100% <i class="dripicons-arrow-right"></i></button>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-auto">
                                                <label for="txtFarmingPoolDepositAmount" data-i18n="depositFarmingPoolPopup.depositAmount">Deposit Amount</label>
                                                <br>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="txtFarmingPoolDepositAmount" name="inputmask-currency" placeholder="0.00" style="text-align: right;">
                                                    <div class="input-group-append"> <span class="input-group-text" id="txtFarmingPoolDepositToken">DAI</span> </div>
                                                </div>
                                                <br>
                                                <label for="txtFarmingPoolBorrowAmount" data-i18n="depositFarmingPoolPopup.borrowedAmount">Borrowed Amount</label>
                                                <br>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="txtFarmingPoolBorrowAmount" name="inputmask-currency" placeholder="0.00" style="text-align: right;" disabled="true">
                                                    <div class="input-group-append"> <span class="input-group-text" id="txtFarmingPoolBorrowToken">DAI</span> </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                        <!-- End row -->
                                    </div>
                                    <!-- End card body -->
                                </div>
                                <!-- End card -->
                            </div>
                            <!-- End col -->
                        </div>
                        <!-- End row -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btnFarmingPoolAddLiquidity" type="button" class="btn btn-primary"><i class="fa fa-refresh fa-spin fa-fw mr-2 hide"></i><a data-i18n="depositFarmingPoolPopup.confirmDeposit">Confirm Deposit</a></button>
                    <button id="btnFarmingPoolCancelAddLiquidity2" type="button" class="btn btn-secondary btn-lg" data-dismiss="modal" data-i18n="depositFarmingPoolPopup.cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end deposit farming pool modal -->
    <!-- begin redeem farming pool modal -->
    <div class="modal fade" id="redeemFarmingPoolPopup" data-backdrop="static" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><img src="assets/images/dai.png" class="h42" alt="dai"><text id="txtFarmingPoolRedeemTitle" data-i18n="redeemFarmingPoolPopup.title"> Redeem DAI</text></h5>
                    <button id="btnFarmingPoolCancelRemoveLiquidity" type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <!-- Start row -->
                        <div class="row">
                            <!-- Start col -->
                            <div class="col">
                                <!-- Start card -->
                                <div class="card m-b-10">
                                    <!-- Start card body -->
                                    <div class="card-body">
                                        <h5 class="card-title" data-i18n="redeemFarmingPoolPopup.selectAmount">Select Amount</h5>
                                        <!-- Start row -->
                                        <div class="row">
                                            <!-- Start col -->
                                            <div class="col">
                                                <label id="txtFarmingPoolHeldToken" data-i18n="redeemFarmingPoolPopup.tokenHeld">BDai Held</label>
                                                <br>
                                                <h4 class="mt-1" id="txtFarmingPoolRedeemBalance" data-i18n="redeemFarmingPoolPopup.na">-NA-</h4> </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-auto mb-3 mb-lg-0">
                                                <label data-i18n="redeemFarmingPoolPopup.redeemPercentAvailable">Redeem % Of Available Amount</label>
                                                <br>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-green amountPercent" data-from="farmingPoolRedeemBalance" data-to="txtFarmingPoolRedeemAmount" data-percent=".25">25% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-yellow amountPercent" data-from="farmingPoolRedeemBalance" data-to="txtFarmingPoolRedeemAmount" data-percent=".5">50% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-orange amountPercent" data-from="farmingPoolRedeemBalance" data-to="txtFarmingPoolRedeemAmount" data-percent=".75">75% <i class="dripicons-arrow-right"></i></button>
                                                    <button type="button" class="btn btn-red amountPercent" data-from="farmingPoolRedeemBalance" data-to="txtFarmingPoolRedeemAmount" data-percent="1.0">100% <i class="dripicons-arrow-right"></i></button>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-auto">
                                                <label for="txtFarmingPoolRedeemAmount" data-i18n="redeemFarmingPoolPopup.redeemAmount">Redemption Amount</label>
                                                <br>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="txtFarmingPoolRedeemAmount" name="inputmask-currency" placeholder="0.00" style="text-align: right;">
                                                    <div class="input-group-append"> <span class="input-group-text" id="txtFarmingPoolRedeemToken">BDai</span> </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                        <!-- End row -->
                                    </div>
                                    <!-- End card body -->
                                </div>
                                <!-- End card -->
                            </div>
                            <!-- End col -->
                        </div>
                        <!-- End row -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btnFarmingPoolRemoveLiquidity" type="button" class="btn btn-primary"><i class="fa fa-refresh fa-spin fa-fw mr-2 hide"></i><a data-i18n="redeemFarmingPoolPopup.confirmRedeem">Confirm Redemption</a></button>
                    <button id="btnFarmingPoolCancelRemoveLiquidity2" type="button" class="btn btn-secondary btn-lg" data-dismiss="modal" data-i18n="redeemFarmingPoolPopup.cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end redeem farming pool modal -->
    <!-- begin redeem lfi modal -->
    <div class="modal fade" id="redeemLfiPopup" data-backdrop="static" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><img src="assets/images/lfi.png" class="h42" alt="LFI"><text data-i18n="redeemFarmingPoolPopup.title"> Redeem LFI</text></h5>
                    <button id="btnCancelRedeemLfi" type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <!-- Start row -->
                        <div class="row">
                            <!-- Start col -->
                            <div class="col">
                                <!-- Start card -->
                                <div class="card m-b-10">
                                    <!-- Start card body -->
                                    <div class="card-body">
                                        <h5 class="card-title" data-i18n="redeemLfiPopup.redeemLfi">Redeem LFI</h5>
                                        <!-- Start row -->
                                        <div class="row">
                                            <!-- Start col -->
                                            <div class="col">
                                                <label data-i18n="redeemLfiPopup.redeemableLfi">Redeemable LFI</label>
                                                <br>
                                                <h4 class="mt-1" id="txtRedeemableLFI" data-i18n="redeemLfiPopup.na">-NA-</h4> </div>
                                            <!-- End col -->
                                            <!-- Start col -->
                                            <div class="col-lg-6">
                                                <div class="card m-b-30">
                                                    <div class="card-footer">
                                                        <h5 class="card-title position-relative"><a data-i18n="redeemLfiPopup.lfiReward">LFI reward</a><img src="assets/images/lfi.png" alt="logo" class="table-logo-right"></h5> </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <table class="table">
                                                                <thead class="thead-light">
                                                                    <tr>
                                                                        <th scope="col" data-i18n="redeemLfiPopup.epoch">Epoch</th>
                                                                        <th scope="col" data-i18n="redeemLfiPopup.lfiReward">LFI reward</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="tblLFIRewardPerEpoch">
                                                                    <tr>
                                                                        <td colspan="2" data-i18n="redeemLfiPopup.na">-NA-</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End col -->
                                        </div>
                                        <!-- End row -->
                                    </div>
                                    <!-- End card body -->
                                </div>
                                <!-- End card -->
                            </div>
                            <!-- End col -->
                        </div>
                        <!-- End row -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btnRedeemLfi" type="button" class="btn btn-primary"><i class="fa fa-refresh fa-spin fa-fw mr-2 hide"></i><a data-i18n="redeemLfiPopup.confirmRedeem">Confirm Redemption</a></button>
                    <button id="btnCancelRedeemLfi2" type="button" class="btn btn-secondary btn-lg" data-dismiss="modal" data-i18n="redeemLfiPopup.cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end redeem lfi modal -->
    <!-- End Modals -->
    <!-- Start js -->
    <script src="assets/js/bignumber.min.js"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/modernizr.min.js"></script>
    <script src="assets/js/detect.js"></script>
    <script src="assets/js/jquery.slimscroll.js"></script>
    <script src="assets/js/i18next.min.js"></script>
    <script src="assets/js/jquery-i18next.min.js"></script>
    <!-- Sweet-Alert js -->
    <script src="assets/plugins/sweet-alert2/sweetalert2.min.js"></script>
    <!-- Slick js -->
    <script src="assets/plugins/slick/slick.min.js"></script>
    <!-- Core js -->
    <script src="assets/js/core.js"></script>
    <!-- Web3 js -->
    <script src="https://unpkg.com/web3@1.3.4/dist/web3.min.js"></script>
    <script src="assets/plugins/jquery-countdown/jquery.countdown.min.js"></script>
    <!-- page js -->
    <script>
    var web3;
    var ethConnected = false;
    var currentAccount = "0x";
    var chainInfo;
    var conn, walletAddress;
    var chainIds = [{"name":"EthereumMainnet", "chainId":1, "shortName":"eth", "chain":"ETH", "network":"Mainnet", "networkId":1, "nativeCurrency":{"name":"Ether", "symbol":"ETH", "decimals":18}, "rpc":["https://mainnet.infura.io/v3/${INFURA_API_KEY}", "https://api.mycryptoapi.com/eth"], "faucets":[], "infoURL":"https://ethereum.org"}, {"name":"EthereumTestnetRopsten", "chainId":3, "shortName":"rop", "chain":"ETH", "network":"Ropsten", "networkId":3, "nativeCurrency":{"name":"RopstenEther", "symbol":"ROP", "decimals":18}, "rpc":["https://ropsten.infura.io/v3/${INFURA_API_KEY}"], "faucets":["https://faucet.ropsten.be?${ADDRESS}"], "infoURL":"https://github.com/ethereum/ropsten"}, {"name":"EthereumTestnetRinkeby", "chainId":4, "shortName":"rin", "chain":"ETH", "network":"Rinkeby", "networkId":4, "nativeCurrency":{"name":"RinkebyEther", "symbol":"RIN", "decimals":18}, "rpc":["https://rinkeby.infura.io/v3/${INFURA_API_KEY}"], "faucets":["https://faucet.rinkeby.io"], "infoURL":"https://www.rinkeby.io"}, {"name":"EthereumTestnetKovan", "chainId":42, "shortName":"kov", "chain":"ETH", "network":"Kovan", "networkId":42, "nativeCurrency":{"name":"KovanEther", "symbol":"KOV", "decimals":18}, "rpc":["https://kovan.infura.io/v3/${INFURA_API_KEY}"], "faucets":["https://faucet.kovan.network", "https://gitter.im/kovan-testnet/faucet"], "infoURL":"https://kovan-testnet.github.io/website"}, {"name":"BinanceSmartChainMainnet", "chainId":56, "shortName":"bnb", "chain":"BSC", "network":"BSC", "networkId":56, "nativeCurrency":{"name":"BinanceChainNativeToken", "symbol":"BNB", "decimals":18}, "rpc":["https://bsc-dataseed1.binance.org", "https://bsc-dataseed2.binance.org", "https://bsc-dataseed3.binance.org", "https://bsc-dataseed4.binance.org", "https://bsc-dataseed1.defibit.io", "https://bsc-dataseed2.defibit.io", "https://bsc-dataseed3.defibit.io", "https://bsc-dataseed4.defibit.io", "https://bsc-dataseed1.ninicoin.io", "https://bsc-dataseed2.ninicoin.io", "https://bsc-dataseed3.ninicoin.io", "https://bsc-dataseed4.ninicoin.io"], "faucets":[], "infoURL":"https://www.binance.org"}];
    var rewardPerEpoch_Dai, rewardPerEpoch_UniDaiLfi, teamRewardPerEpoch, farmingPoolLeverageFactor = 20;
    const LiquidityPoolEnum = Object.freeze({"Dai":"DAI", "UniDaiLfi":"DAI/LFI UNI LP"});
    const AdaptorEnum = Object.freeze({"DaiYearn":"Yearn DAI Vault"});

    //dashboard
    var btnConnectWallet, spanConnectWallet, iconConnectWallet;
    var btnConnected, spanConnected, btnsRefresh, btnNetwork, spanNetwork;
    var txtTotalValueLockedDashboard, txtAvailablePoolSupplyDashboard, txtReservePoolDashboard, txtTokenLFIPriceDashboard;
    var txtTokenLDai, txtTokenLUniDaiLfi, txtTokenLFI, txtTokenLFIRedeemable, txtTokenLFIEstimated, infoEstimatedLfi;
    var txtTokenLDaiLink, txtTokenLUniDaiLfiLink, txtTokenLFILink;
    var txtCurrentEpoch, txtNextEpoch, txtNextEpochStartDate, txtCurrentEpochEndIn, progressBarCurrentEpoch;
    var divDashboardContractAddressYearnDaiVault, txtDashboardContractAddressLfi, txtDashboardContractAddressDaiTreasuryPool, txtDashboardContractAddressUniDaiLfiPool, txtDashboardContractAddressYearnDaiVault;
    var currentEpoch = 0, totalNumberOfEpochs = 10, currentEpochStartTime = 0, currentEpochEndTime = 0, yearnDaiBorrowerInterestRate = 10;

    //pools
    var txtTotalValueLockedPools, txtAvailablePoolSupplyPools, txtReservePoolPools, txtTokenLFIPricePools;
    var divPoolsContractAddressYearnDaiVault, txtPoolsContractAddressLfi, txtPoolsContractAddressDaiTreasuryPool, txtPoolsContractAddressUniDaiLfiPool, txtPoolsContractAddressYearnDaiVault;

    //deposit treasury pool btns
    var btnTreasuryPoolDepositDai, btnTreasuryPoolDepositUniDaiLfi;
    var txtTreasuryPoolDaiAPYDai, txtTreasuryPoolDaiAPYLfi, txtTreasuryPoolUniDaiLfiAPYLfi;
    var txtTreasuryPoolDaiLink, spanTreasuryPoolDaiAPYDai, txtTreasuryPoolUniDaiLfiLink, infoUniDaiLfi;

    //redeem treasury pool btns
    var btnTreasuryPoolRedeemDai, btnTreasuryPoolRedeemUniDaiLfi, btnPoolRedeemLFI_Dai, btnPoolRedeemLFI_UniDaiLfi;
    var txtRedeemLDai, txtRedeemLUniDaiLfi, txtRedeemLFI_Dai, txtRedeemLFI_UniDaiLfi;

    //deposit treasury pool popup
    var txtTreasuryPoolDepositBalance, treasuryPoolDepositBalance, txtTreasuryPoolDepositAmount, imgTreasuryPoolDepositTitle, txtTreasuryPoolDepositTitle, txtTreasuryPoolAvailableToken, txtTreasuryPoolDepositToken, txtTreasuryPoolGetTokenLink;
    var btnTreasuryPoolAddLiquidity, btnTreasuryPoolCancelAddLiquidity, btnTreasuryPoolCancelAddLiquidity2;
    var selectedTreasuryPoolDepositToken;

    //redeem treasury pool popup
    var txtTreasuryPoolRedeemBalance, treasuryPoolRedeemBalance, txtTreasuryPoolRedeemAmount, imgTreasuryPoolRedeemTitle, txtTreasuryPoolRedeemTitle, txtTreasuryPoolHeldToken, txtTreasuryPoolRedeemToken;
    var btnTreasuryPoolRemoveLiquidity, btnTreasuryPoolCancelRemoveLiquidity, btnTreasuryPoolCancelRemoveLiquidity2;
    var selectedTreasuryPoolRedeemToken;

    //deposit farming pool btns
    var farmingPoolsHeaderMsg;
    var btnYearnPoolDepositDai;
    var txtYearnDaiPoolAPY, txtYearnDaiPoolLevAPY;
    var txtYearnDaiPoolLink;
    var imgYearnDaiPool;
    var divYearnDaiPoolApy, divCurveDaiPoolApy, divHarvestDaiPoolApy, divCompoundDaiPoolApy, divAaveDaiPoolApy, divCreamDaiPoolApy;

    //redeem farming pool btns
    var btnYearnPoolRedeemDai;
    var txtYearnPoolRedeemBDai;
    var headerFarmingPoolRedeem, divYearnDaiRedeem;

    //deposit farming pool popup
    var txtFarmingPoolDepositBalance, farmingPoolDepositBalance, txtFarmingPoolBorrowableToken, txtFarmingPoolBorrowableTokenBalance, txtFarmingPoolDepositAmount, txtFarmingPoolBorrowAmount, txtFarmingPoolDepositTitle, txtFarmingPoolAvailableToken, txtFarmingPoolDepositToken, txtFarmingPoolBorrowToken;
    var btnFarmingPoolAddLiquidity, btnFarmingPoolCancelAddLiquidity, btnFarmingPoolCancelAddLiquidity2;
    var selectedFarmingPoolDepositToken, selectedFarmingPoolDepositAdaptor;

    //redeem farming pool popup
    var txtFarmingPoolRedeemBalance, farmingPoolRedeemBalance, txtFarmingPoolRedeemAmount, txtFarmingPoolRedeemTitle, txtFarmingPoolHeldToken, txtFarmingPoolRedeemToken;
    var btnFarmingPoolRemoveLiquidity, btnFarmingPoolCancelRemoveLiquidity, btnFarmingPoolCancelRemoveLiquidity2;
    var selectedFarmingPoolRedeemToken, selectedFarmingPoolRedeemAdaptor;

    //redeem lfi popup
    var txtRedeemableLFI, tblLFIRewardPerEpoch;
    var btnRedeemLfi, btnCancelRedeemLfi, btnCancelRedeemLfi2;
    var fromEpoch, toEpoch, selectedRedeemLfiToken;

    //mobile
    var mobileMenuBtn, connectMetamaskMobileMsg, socialBar;

    var updatableFields =
    [
        "txtTotalValueLockedDashboard", "txtAvailablePoolSupplyDashboard", "txtReservePoolDashboard", "txtTokenLFIPriceDashboard",
        "txtTokenLDai", "txtTokenLUniDaiLfi", "txtTokenLFI", "txtTokenLFIRedeemable", "txtTokenLFIEstimated",
        "txtTotalValueLockedPools", "txtAvailablePoolSupplyPools", "txtReservePoolPools", "txtTokenLFIPricePools",
        "txtTreasuryPoolDaiAPYDai", "txtTreasuryPoolDaiAPYLfi", "txtTreasuryPoolUniDaiLfiAPYLfi",
        "txtRedeemLDai", "txtRedeemLFI_Dai", "txtRedeemLUniDaiLfi", "txtRedeemLFI_UniDaiLfi", "txtYearnPoolRedeemBDai",
        "txtYearnDaiPoolAPY", "txtYearnDaiPoolLevAPY"
    ];
    var eth = new BigNumber("1e18");
    var redeemableLFIArr_Dai, redeemableLFIArr_UniDaiLfi, totalRedeemableLFI_Dai = new BigNumber(0), totalRedeemableLFI_UniDaiLfi = new BigNumber(0), isEstimatingLFI = false;

    var uniswapGraphUrl =
    {
        "rop":"https://api.thegraph.com/subgraphs/name/timloh-gtoken/uniswapv2-ropsten",
        "eth":"https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2",
        "kov":"https://api.thegraph.com/subgraphs/name/timloh-gtoken/uniswapv2-kovan"
    };

    var etherscanAddressUrl =
    {
        "rop":"https://ropsten.etherscan.io/address/",
        "eth":"https://etherscan.io/address/",
        "kov":"https://kovan.etherscan.io/address/"
    };

    var contractDAI;
    var addressDAI =
    {
        "rop":"0xad6d458402f60fd3bd25163575031acdce07538d",
        "eth":"0x6b175474e89094c44da98b954eedeac495271d0f",
        "kov":"0x4f96fe3b7a6cf9725f59d353f723c1bdb64ca6aa"
    };
    var abiDAI = [{"inputs":[{"internalType":"address", "name":"account", "type":"address"}], "name":"balanceOf", "outputs":[{"internalType":"uint256", "name":"", "type":"uint256"}], "stateMutability":"view", "type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}];

    var contractUniDaiLfi;
    var addressUniDaiLfi =
    {
        "rop":"0x5c1e97c7b59c4d01d7c6d419116a4b668edf155c",
        "eth":"0xdbadcaa09978acc0c91af6a81980c6cd64f715d6",
        "kov":"0x1d99e4b39bd8d6d1896d2ff99394cd6377dba8d8"
    };
    var abiUniDaiLfi = [{"inputs":[{"internalType":"address", "name":"account", "type":"address"}], "name":"balanceOf", "outputs":[{"internalType":"uint256", "name":"", "type":"uint256"}], "stateMutability":"view", "type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}];

    // Levf contracts
    var contractLFI;
    var addressLFI =
    {
        "rop":"0x69826725B495F8dFc9797F6E6096969ef8E0f238",
        "eth":"0x4764f454dff3a0121a0d61e262344ffcd5236c4b",
        "kov":"0x8b0D3A0225194B7B37F5A27F6E6a51f7243d8DBd"
    };
    var abiLFI = [{"inputs":[{"internalType":"address", "name":"account", "type":"address"}], "name":"balanceOf", "outputs":[{"internalType":"uint256", "name":"", "type":"uint256"}], "stateMutability":"view", "type":"function"}];

    var contractLDai;
    var addressLDai =
    {
        "rop":"0x2e9f785f9ad0b0f87153611451df5b95e6e42c66",
        "eth":"0xb9164b1fd4909bdbbb1c95370c440938e09ee0d2",
        "kov":"0x16d133e10b162fda3a8dacabca26844844b43262"
    };
    var abiLDai = [{"inputs":[{"internalType":"address", "name":"account", "type":"address"}], "name":"balanceOf", "outputs":[{"internalType":"uint256", "name":"", "type":"uint256"}], "stateMutability":"view", "type":"function"}];

    var contractLUniDaiLfi;
    var addressLUniDaiLfi =
    {
        "rop":"0x6b3f4e441a0e1026e4133bbfe155a75c5ee326e9",
        "eth":"0xf2f382085d1e40d5e510adec71d0b39973f67897",
        "kov":"0x989966661e10b456c9afa7fc34f0fd9769ac231c"
    };
    var abiLUniDaiLfi = [{"inputs":[{"internalType":"address", "name":"account", "type":"address"}], "name":"balanceOf", "outputs":[{"internalType":"uint256", "name":"", "type":"uint256"}], "stateMutability":"view", "type":"function"}];

    var contractDsecDistDai;
    var addressDsecDistDai =
    {
        "rop":"0xe3d49f992637915dcc5ad25dc3afcbe6c4e5e6a0",
        "eth":"0xe2b67159c6054fcfaef5a6764179830d22711497",
        "kov":"0x66029527bb816b08c4908ba27a05f49724267168"
    };
    var abiDsecDist = [{"inputs":[],"name":"DSEC_WITHDRAW_PENALTY_RATE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"addDsec","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"epoch","type":"uint256"},{"internalType":"uint256","name":"distributionAmount","type":"uint256"}],"name":"calculateRewardFor","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"epoch","type":"uint256"}],"name":"dsecBalanceFor","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"distributionAmount","type":"uint256"}],"name":"estimateRewardForCurrentEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCurrentEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCurrentEpochEndTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCurrentEpochStartTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getDsecForTransferNow","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"epoch","type":"uint256"}],"name":"getEndTimestampForEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"getEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"getEpochEndTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"getEpochStartTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSecondsUntilCurrentEpochEnd","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"getSecondsUntilEpochEnd","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"epoch","type":"uint256"}],"name":"getStartEndTimestampsForEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"epoch","type":"uint256"}],"name":"getStartTimestampForEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"governanceAccount","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"governanceForming","outputs":[{"internalType":"uint256","name":"totalNumberOfEpochs","type":"uint256"},{"internalType":"uint256","name":"startTimestamp","type":"uint256"},{"internalType":"uint256","name":"epochDuration","type":"uint256"},{"internalType":"uint256","name":"intervalBetweenEpochs","type":"uint256"},{"internalType":"uint256","name":"endTimestamp","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"epoch","type":"uint256"}],"name":"hasRedeemedDsec","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"epoch","type":"uint256"}],"name":"hasRedeemedTeamReward","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"epoch","type":"uint256"},{"internalType":"uint256","name":"distributionAmount","type":"uint256"}],"name":"redeemDsec","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"epoch","type":"uint256"}],"name":"redeemTeamReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"removeDsec","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newGovernanceAccount","type":"address"}],"name":"setGovernanceAccount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newTreasuryPoolAddress","type":"address"}],"name":"setTreasuryPoolAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"totalDsec","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalNumberOfEpochs","outputs":[{"internalType":"uint256","name":"totalNumberOfEpochs_","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"treasuryPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}];

    var contractDsecDistUniDaiLfi;
    var addressDsecDistUniDaiLfi =
    {
        "rop":"0x6c0531ee28f1aa6f32843b50e4b056ee51c71e90",
        "eth":"0x6f13105680db437a8b76f6ad9ecae7048834c005",
        "kov":"0xf91de88d66cbdcabf9790928e91a4e954eaa524e"
    };

    var contractTreasuryPoolDai;
    var addressTreasuryPoolDai =
    {
        "rop":"0x5227A5993228a9689a9f714584c803b284429068",
        "eth":"0x585381aCbFAF12294C3e17fb8918CC90c930Dd22",
        "kov":"0x75405D06C5B35B55d54956FD279b065516a475b6"
    };
    var abiTreasuryPoolDai = [{"inputs":[],"name":"ROUNDING_TOLERANCE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"address_","type":"address"}],"name":"addFarmingPoolAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"addLiquidity","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"dsecDistributionAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"estimateLtokensFor","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"estimateUnderlyingAssetsFor","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"farmingPoolAddresses","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalUnderlyingAssetAvailable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getUtilisationRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"governanceAccount","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lfiAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"loan","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lpRewardPerEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ltokenAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"fromEpoch","type":"uint256"},{"internalType":"uint256","name":"toEpoch","type":"uint256"}],"name":"redeemProviderReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"fromEpoch","type":"uint256"},{"internalType":"uint256","name":"toEpoch","type":"uint256"}],"name":"redeemTeamReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"address_","type":"address"}],"name":"removeFarmingPoolAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"removeLiquidity","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"principal","type":"uint256"},{"internalType":"uint256","name":"interest","type":"uint256"}],"name":"repay","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newGovernanceAccount","type":"address"}],"name":"setGovernanceAccount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"teamAccount","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"teamRewardPerEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalLoanedUnderlyingAssetAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalLtokenAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalUnderlyingAssetAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"underlyingAssetAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}];

    var contractTreasuryPoolUniDaiLfi;
    var addressTreasuryPoolUniDaiLfi =
    {
        "rop":"0x13AE42b5FFD8f486dbfAFB7b4f77C0769B0e0953",
        "eth":"0xca850275b6d5b01Ebac6e4be29B35fEF2199e03f",
        "kov":"0x9C3fb5854FB1C2069EE5b4D8138A3fd2356873EB"
    };
    var abiTreasuryPoolUniDaiLfi = [{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"addLiquidity","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"removeLiquidity","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"fromEpoch","type":"uint256"},{"internalType":"uint256","name":"toEpoch","type":"uint256"}],"name":"redeemProviderReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lpRewardPerEpoch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalUnderlyingAssetAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalUnderlyingAssetAvailable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}];

    var contractBDai;
    var addressBDai;
    var abiBDai = [{"inputs":[{"internalType":"address", "name":"account", "type":"address"}], "name":"balanceOf", "outputs":[{"internalType":"uint256", "name":"", "type":"uint256"}], "stateMutability":"view", "type":"function"}];

    var contractYearnDaiPool;
    var addressYearnDaiPool;
    var abiFarmingPool = [{"inputs":[],"name":"DAYS_IN_YEAR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"INTEREST_RATE_INTEGER_POINT_1","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"INTEREST_RATE_INTEGER_POINT_2","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"INTEREST_RATE_SLOPE_1","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"INTEREST_RATE_SLOPE_2","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NUM_FRACTION_BITS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_100","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROUNDING_TOLERANCE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_DAY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_YEAR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"UTILISATION_RATE_POINT_1","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"UTILISATION_RATE_POINT_2","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"presentValue","type":"uint256"},{"internalType":"uint256","name":"nominalAnnualRate","type":"uint256"},{"internalType":"uint256","name":"numSeconds","type":"uint256"}],"name":"accruePerSecondCompoundInterest","outputs":[{"internalType":"uint256","name":"futureValue","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"adapterAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"addLiquidity","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"btokenAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"farmerAccount","type":"address"},{"internalType":"uint256","name":"btokenAmount","type":"uint256"},{"internalType":"uint256","name":"underlyingAssetQuantity","type":"uint256"},{"internalType":"uint256","name":"outstandingInterest","type":"uint256"}],"name":"calculateRepaymentDetails","outputs":[{"components":[{"internalType":"uint256","name":"underlyingAssetInvested","type":"uint256"},{"internalType":"uint256","name":"profit","type":"uint256"},{"internalType":"uint256","name":"taxAmount","type":"uint256"},{"internalType":"uint256","name":"depositPrincipal","type":"uint256"},{"internalType":"uint256","name":"payableInterest","type":"uint256"},{"internalType":"uint256","name":"loanPrincipalToRepay","type":"uint256"},{"internalType":"uint256","name":"amountToReceive","type":"uint256"}],"internalType":"structFarmingPool.RepaymentDetails","name":"repaymentDetails","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"computeBorrowerInterestEarning","outputs":[{"internalType":"uint256","name":"borrowerInterestEarning","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"estimateBorrowerInterestEarning","outputs":[{"internalType":"uint256","name":"borrowerInterestEarning","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"utilisationRate","type":"uint256"}],"name":"getBorrowNominalAnnualRate","outputs":[{"internalType":"uint256","name":"integerInterestRate","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"getLoansAtLastAccrualFor","outputs":[{"internalType":"uint256[]","name":"interestRates","type":"uint256[]"},{"internalType":"uint256[]","name":"principalsOnly","type":"uint256[]"},{"internalType":"uint256[]","name":"principalsWithInterest","type":"uint256[]"},{"internalType":"uint256[]","name":"lastAccrualTimestamps","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPoolLoansAtLastAccrual","outputs":[{"internalType":"uint256[]","name":"interestRates","type":"uint256[]"},{"internalType":"uint256[]","name":"principalsOnly","type":"uint256[]"},{"internalType":"uint256[]","name":"principalsWithInterest","type":"uint256[]"},{"internalType":"uint256[]","name":"lastAccrualTimestamps","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"currentTimestamp","type":"uint256"},{"internalType":"uint256","name":"lastAccrualTimestamp","type":"uint256"}],"name":"getSecondsSinceLastAccrual","outputs":[{"internalType":"uint256","name":"secondsSinceLastAccrual","type":"uint256"},{"internalType":"uint256","name":"accrualTimestamp","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"getTotalTransferToAdapterFor","outputs":[{"internalType":"uint256","name":"totalTransferToAdapter","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"governanceAccount","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"insuranceFundAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"leverageFactor","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"liquidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"liquidationPenalty","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"liquidationThreshold","type":"uint256"}],"name":"needToLiquidate","outputs":[{"internalType":"bool","name":"isLiquidate","type":"bool"},{"internalType":"uint256","name":"accountRedeemableUnderlyingTokens","type":"uint256"},{"internalType":"uint256","name":"threshold","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"requestedAmount","type":"uint256"}],"name":"removeLiquidity","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newAdapterAddress","type":"address"}],"name":"setAdapterAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newGovernanceAccount","type":"address"}],"name":"setGovernanceAccount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"liquidationPenalty_","type":"uint256"}],"name":"setLiquidationPenalty","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newTreasuryPoolAddress","type":"address"}],"name":"setTreasuryPoolAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"taxRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalInterestEarned","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalUnderlyingAsset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"treasuryPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"underlyingAssetAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}];

    var addressReservePool =
    {
        "eth":"0x732A4EFe36B7eD6a008Ef45E8b3976D211f6699A",
        "kov":"0x7A2D95BeB00F899F9fc645e88749b9644c400775"
    };

    function updateMenuTabs(hash)
    {
        var a = window.location;
        var anchors = document.querySelectorAll(".vertical-menu a, .togglebar a");
        for (var i = 0;i<anchors.length;i++)
        {
            if(anchors[i].href == a.href)
            {
                anchors[i].classList.add("active");
                anchors[i].parentElement.classList.add("active");
            }
            else
            {
                anchors[i].classList.remove("active");
                anchors[i].parentElement.classList.remove("active");
            }
        }

        //TODO: only connect if requested, and use local storage to remember last connection type
        let needsWalletConnect = ["#dashboard", "#liquidity", "#redeem", "#docs"];
        if(!ethConnected && needsWalletConnect.includes(window.location.hash.toLowerCase())) showConnectWalletPopup();
    }

    function init()
    {
        //set rounding modes of big numbers to truncate to floor, no rounding
        //https://mikemcl.github.io/bignumber.js/#decimal-places
        BigNumber.set({ ROUNDING_MODE: BigNumber.ROUND_FLOOR });

        //initialize html element vars
        // topbarLFI = document.getElementById("topbarLFI");

        btnConnectWallet = document.getElementById("btnConnectWallet");
        spanConnectWallet = document.getElementById("spanConnectWallet");
        iconConnectWallet = document.getElementById("iconConnectWallet");
        btnConnected = document.getElementById("btnConnected");
        spanConnected = document.getElementById("spanConnected");
        btnNetwork = document.getElementById("btnNetwork");
        spanNetwork = document.getElementById("spanNetwork");

        txtTotalValueLockedDashboard = document.getElementById("txtTotalValueLockedDashboard");
        txtAvailablePoolSupplyDashboard = document.getElementById("txtAvailablePoolSupplyDashboard");
        txtReservePoolDashboard = document.getElementById("txtReservePoolDashboard");
        txtTokenLFIPriceDashboard = document.getElementById("txtTokenLFIPriceDashboard");
        txtTokenLDai = document.getElementById("txtTokenLDai");
        txtTokenLDaiLink = document.getElementById("txtTokenLDaiLink");
        txtTokenLUniDaiLfi = document.getElementById("txtTokenLUniDaiLfi");
        txtTokenLUniDaiLfiLink = document.getElementById("txtTokenLUniDaiLfiLink");
        txtTokenLFI = document.getElementById("txtTokenLFI");
        txtTokenLFILink = document.getElementById("txtTokenLFILink");
        txtTokenLFIRedeemable = document.getElementById("txtTokenLFIRedeemable");
        txtTokenLFIEstimated = document.getElementById("txtTokenLFIEstimated");
        infoEstimatedLfi = document.getElementById("infoEstimatedLfi");

        txtCurrentEpoch = document.getElementById("txtCurrentEpoch");
        txtNextEpoch = document.getElementById("txtNextEpoch");
        txtNextEpochStartDate = document.getElementById("txtNextEpochStartDate");
        txtCurrentEpochEndIn = document.getElementById("txtCurrentEpochEndIn");
        progressBarCurrentEpoch = document.getElementById("progressBarCurrentEpoch");

        divDashboardContractAddressYearnDaiVault = document.getElementById("divDashboardContractAddressYearnDaiVault");
        txtDashboardContractAddressLfi = document.getElementById("txtDashboardContractAddressLfi");
        txtDashboardContractAddressDaiTreasuryPool = document.getElementById("txtDashboardContractAddressDaiTreasuryPool");
        txtDashboardContractAddressUniDaiLfiPool = document.getElementById("txtDashboardContractAddressUniDaiLfiPool");
        txtDashboardContractAddressYearnDaiVault = document.getElementById("txtDashboardContractAddressYearnDaiVault");

        txtTotalValueLockedPools = document.getElementById("txtTotalValueLockedPools");
        txtAvailablePoolSupplyPools = document.getElementById("txtAvailablePoolSupplyPools");
        txtReservePoolPools = document.getElementById("txtReservePoolPools");
        txtTokenLFIPricePools = document.getElementById("txtTokenLFIPricePools");

        divPoolsContractAddressYearnDaiVault = document.getElementById("divPoolsContractAddressYearnDaiVault");
        txtPoolsContractAddressLfi = document.getElementById("txtPoolsContractAddressLfi");
        txtPoolsContractAddressDaiTreasuryPool = document.getElementById("txtPoolsContractAddressDaiTreasuryPool");
        txtPoolsContractAddressUniDaiLfiPool = document.getElementById("txtPoolsContractAddressUniDaiLfiPool");
        txtPoolsContractAddressYearnDaiVault = document.getElementById("txtPoolsContractAddressYearnDaiVault");

        btnTreasuryPoolDepositDai = document.getElementById("btnTreasuryPoolDepositDai");
        btnTreasuryPoolDepositUniDaiLfi = document.getElementById("btnTreasuryPoolDepositUniDaiLfi");
        txtTreasuryPoolDaiAPYDai = document.getElementById("txtTreasuryPoolDaiAPYDai");
        txtTreasuryPoolDaiAPYLfi = document.getElementById("txtTreasuryPoolDaiAPYLfi");
        txtTreasuryPoolDaiLink = document.getElementById("txtTreasuryPoolDaiLink");
        spanTreasuryPoolDaiAPYDai = document.getElementById("spanTreasuryPoolDaiAPYDai");
        txtTreasuryPoolUniDaiLfiAPYLfi = document.getElementById("txtTreasuryPoolUniDaiLfiAPYLfi");
        txtTreasuryPoolUniDaiLfiLink = document.getElementById("txtTreasuryPoolUniDaiLfiLink");
        infoUniDaiLfi = document.getElementById("infoUniDaiLfi");

        txtRedeemLDai = document.getElementById("txtRedeemLDai");
        txtRedeemLUniDaiLfi = document.getElementById("txtRedeemLUniDaiLfi");
        txtRedeemLFI_Dai = document.getElementById("txtRedeemLFI_Dai");
        txtRedeemLFI_UniDaiLfi = document.getElementById("txtRedeemLFI_UniDaiLfi");
        btnTreasuryPoolRedeemDai = document.getElementById("btnTreasuryPoolRedeemDai");
        btnTreasuryPoolRedeemUniDaiLfi = document.getElementById("btnTreasuryPoolRedeemUniDaiLfi");
        btnPoolRedeemLFI_Dai = document.getElementById("btnPoolRedeemLFI_Dai");
        btnPoolRedeemLFI_UniDaiLfi = document.getElementById("btnPoolRedeemLFI_UniDaiLfi");

        txtTreasuryPoolDepositBalance = document.getElementById("txtTreasuryPoolDepositBalance");
        txtTreasuryPoolDepositAmount = document.getElementById("txtTreasuryPoolDepositAmount");
        imgTreasuryPoolDepositTitle = document.getElementById("imgTreasuryPoolDepositTitle");
        txtTreasuryPoolDepositTitle = document.getElementById("txtTreasuryPoolDepositTitle");
        txtTreasuryPoolAvailableToken = document.getElementById("txtTreasuryPoolAvailableToken");
        txtTreasuryPoolDepositToken = document.getElementById("txtTreasuryPoolDepositToken");
        txtTreasuryPoolGetTokenLink = document.getElementById("txtTreasuryPoolGetTokenLink");
        btnTreasuryPoolAddLiquidity = document.getElementById("btnTreasuryPoolAddLiquidity");
        btnTreasuryPoolCancelAddLiquidity = document.getElementById("btnTreasuryPoolCancelAddLiquidity");
        btnTreasuryPoolCancelAddLiquidity2 = document.getElementById("btnTreasuryPoolCancelAddLiquidity2");

        txtTreasuryPoolRedeemBalance = document.getElementById("txtTreasuryPoolRedeemBalance");
        txtTreasuryPoolRedeemAmount = document.getElementById("txtTreasuryPoolRedeemAmount");
        imgTreasuryPoolRedeemTitle = document.getElementById("imgTreasuryPoolRedeemTitle");
        txtTreasuryPoolRedeemTitle = document.getElementById("txtTreasuryPoolRedeemTitle");
        txtTreasuryPoolHeldToken = document.getElementById("txtTreasuryPoolHeldToken");
        txtTreasuryPoolRedeemToken = document.getElementById("txtTreasuryPoolRedeemToken");
        btnTreasuryPoolRemoveLiquidity = document.getElementById("btnTreasuryPoolRemoveLiquidity");
        btnTreasuryPoolCancelRemoveLiquidity = document.getElementById("btnTreasuryPoolCancelRemoveLiquidity");
        btnTreasuryPoolCancelRemoveLiquidity2 = document.getElementById("btnTreasuryPoolCancelRemoveLiquidity2");

        farmingPoolsHeaderMsg = document.getElementById("farmingPoolsHeaderMsg");
        btnYearnPoolDepositDai = document.getElementById("btnYearnPoolDepositDai");
        txtYearnDaiPoolAPY = document.getElementById("txtYearnDaiPoolAPY");
        txtYearnDaiPoolLevAPY = document.getElementById("txtYearnDaiPoolLevAPY");
        txtYearnDaiPoolLink = document.getElementById("txtYearnDaiPoolLink");
        imgYearnDaiPool = document.getElementById("imgYearnDaiPool");
        divYearnDaiPoolApy = document.getElementById("divYearnDaiPoolApy");

        txtYearnPoolRedeemBDai = document.getElementById("txtYearnPoolRedeemBDai");
        btnYearnPoolRedeemDai = document.getElementById("btnYearnPoolRedeemDai");
        headerFarmingPoolRedeem = document.getElementById("headerFarmingPoolRedeem");
        divYearnDaiRedeem = document.getElementById("divYearnDaiRedeem");

        txtFarmingPoolDepositBalance = document.getElementById("txtFarmingPoolDepositBalance");
        txtFarmingPoolDepositAmount = document.getElementById("txtFarmingPoolDepositAmount");
        txtFarmingPoolBorrowableToken = document.getElementById("txtFarmingPoolBorrowableToken");
        txtFarmingPoolBorrowableTokenBalance = document.getElementById("txtFarmingPoolBorrowableTokenBalance");
        txtFarmingPoolBorrowAmount = document.getElementById("txtFarmingPoolBorrowAmount");
        txtFarmingPoolDepositTitle = document.getElementById("txtFarmingPoolDepositTitle");
        txtFarmingPoolAvailableToken = document.getElementById("txtFarmingPoolAvailableToken");
        txtFarmingPoolDepositToken = document.getElementById("txtFarmingPoolDepositToken");
        txtFarmingPoolBorrowToken = document.getElementById("txtFarmingPoolBorrowToken");
        btnFarmingPoolAddLiquidity = document.getElementById("btnFarmingPoolAddLiquidity");
        btnFarmingPoolCancelAddLiquidity = document.getElementById("btnFarmingPoolCancelAddLiquidity");
        btnFarmingPoolCancelAddLiquidity2 = document.getElementById("btnFarmingPoolCancelAddLiquidity2");

        txtFarmingPoolRedeemBalance = document.getElementById("txtFarmingPoolRedeemBalance");
        txtFarmingPoolRedeemAmount = document.getElementById("txtFarmingPoolRedeemAmount");
        txtFarmingPoolRedeemTitle = document.getElementById("txtFarmingPoolRedeemTitle");
        txtFarmingPoolHeldToken = document.getElementById("txtFarmingPoolHeldToken");
        txtFarmingPoolRedeemToken = document.getElementById("txtFarmingPoolRedeemToken");
        btnFarmingPoolRemoveLiquidity = document.getElementById("btnFarmingPoolRemoveLiquidity");
        btnFarmingPoolCancelRemoveLiquidity = document.getElementById("btnFarmingPoolCancelRemoveLiquidity");
        btnFarmingPoolCancelRemoveLiquidity2 = document.getElementById("btnFarmingPoolCancelRemoveLiquidity2");

        txtRedeemableLFI = document.getElementById("txtRedeemableLFI");
        tblLFIRewardPerEpoch = document.getElementById("tblLFIRewardPerEpoch");
        btnRedeemLfi = document.getElementById("btnRedeemLfi");
        btnCancelRedeemLfi = document.getElementById("btnCancelRedeemLfi");
        btnCancelRedeemLfi2 = document.getElementById("btnCancelRedeemLfi2");

        mobileMenuBtn = document.getElementById("mobileMenuBtn");
        connectMetamaskMobileMsg = document.getElementById("connectMetamaskMobileMsg");
        socialBar = document.getElementById("socialBar");

        // connect links/buttons
        btnConnectWallet.addEventListener("click", showConnectWalletPopup);
        btnConnected.addEventListener("click", showConnectWalletPopup);
        // deposit treasury pool btns
        btnTreasuryPoolDepositDai.addEventListener("click", function() { showTreasuryPoolDepositPopup(LiquidityPoolEnum.Dai); });
        btnTreasuryPoolDepositUniDaiLfi.addEventListener("click", function() { showTreasuryPoolDepositPopup(LiquidityPoolEnum.UniDaiLfi); });
        btnTreasuryPoolAddLiquidity.addEventListener("click", addTreasuryPoolLiquidity);
        // redeem treasury pool btns
        btnTreasuryPoolRedeemDai.addEventListener("click", function() { showTreasuryPoolRedeemPopup(LiquidityPoolEnum.Dai); });
        btnTreasuryPoolRedeemUniDaiLfi.addEventListener("click", function() { showTreasuryPoolRedeemPopup(LiquidityPoolEnum.UniDaiLfi); });
        btnTreasuryPoolRemoveLiquidity.addEventListener("click", removeTreasuryPoolLiquidity);
        // deposit farming pool btns
        btnYearnPoolDepositDai.addEventListener("click", function() { showFarmingPoolDepositPopup(AdaptorEnum.DaiYearn) });
        btnFarmingPoolAddLiquidity.addEventListener("click", addFarmingPoolLiquidity);
        // redeem farming pool btns
        btnYearnPoolRedeemDai.addEventListener("click", function() { showFarmingPoolRedeemPopup(AdaptorEnum.DaiYearn) });
        btnFarmingPoolRemoveLiquidity.addEventListener("click", removeFarmingPoolLiquidity);
        // redeem LFI from treasury pool btns
        btnPoolRedeemLFI_Dai.addEventListener("click", function() { showRedeemLfiPopup(LiquidityPoolEnum.Dai); });
        btnPoolRedeemLFI_UniDaiLfi.addEventListener("click", function() { showRedeemLfiPopup(LiquidityPoolEnum.UniDaiLfi); });
        btnRedeemLfi.addEventListener("click", redeemLfiReward);

        //dismiss popovers
        $('.popover-dismiss').popover({
            trigger: 'focus'
        });
        $("[data-toggle=popover]")
        .popover({ html: true})
        .on("focus", function () {
            $(this).popover("show");
        }).on("focusout", function () {
            var _this = this;
            if (!$(".popover:hover").length) {
                $(this).popover("hide");
            }
            else {
                $('.popover').mouseleave(function() {
                    $(_this).popover("hide");
                    $(this).off('mouseleave');
                });
            }
        });

        //connect refresh buttons
        btnsRefresh = document.getElementsByClassName("btn refresh");
        for(let i = 0; i < btnsRefresh.length; i++)
        {
            btnsRefresh[i].addEventListener("click", updateBalances);
        }

        //add amounts buttons
        document.querySelectorAll(".amountPercent").forEach(button =>
        {
            button.addEventListener("click", event =>
            {
                let froms = button.dataset.from.split(", ");
                let tos = button.dataset.to.split(", ");
                for(let i = 0; i < froms.length; i++)
                {
                    let from = window[froms[i]];  //is BigNumber already
                    let to = window[tos[i]];
                    console.log("from:", from, "to:", to);
                    let percent = new BigNumber(button.dataset.percent);
                    if(button.dataset.percent == 1)
                    {
                        to.value = from.div(eth);
                    }
                    else
                    {
                        to.value = from.times(percent).div(eth).toFixed(8);
                    }

                    to.dispatchEvent(new Event('change'));
                }
            });
        });

        /* Automagically jump on good tab based on anchor; for page reloads or links */
        if(location.hash)
        {
            console.log("load "+location.hash);
            $('a[href="' + location.hash + '"]').tab('show');
        }
        else
        {
            console.log("load #home");
            $('a[href="#home"]').tab('show');
        }
        $('a[data-toggle="tab"]').on('shown.bs.tab', function(e)
        {
            location.hash = $(e.target).attr('href').substr(1);
            console.log("shown.bs.tab", location.hash);
            scrollTo(0, 0);
            updateMenuTabs(location.hash);
        });
        $('a[data-toggle="tab"]').on('show.bs.tab', function(e)
        {
            console.log("show.bs.tab");
        });
        $('a[data-toggle="tab"]').on('hide.bs.tab', function(e)
        {
            console.log("hide.bs.tab");
        });
        $('a[data-toggle="tab"]').on('hidden.bs.tab', function(e)
        {
            console.log("hidden.bs.tab");
        });
        /* Update hash based on tab, basically restores browser default behavior to fix bootstrap tabs */
        $(document.body).on("click", "a[data-toggle]", function(event)
        {
            location.hash = this.getAttribute("href");
        });
        /* on history back activate the tab of the location hash if exists or the default tab if no hash exists */
        $(window).on('popstate', function()
        {
            //var anchor = location.hash || $("a[data-toggle = tab]").first().attr("href");
            var anchor = location.hash;
            $('a[href="' + anchor + '"]').tab('show');
        });

        $("#txtFarmingPoolDepositAmount").on('change keydown paste input', function()
        {
            txtFarmingPoolBorrowAmount.value = (new BigNumber(txtFarmingPoolDepositAmount.value)).times(farmingPoolLeverageFactor - 1);
        });

        // add string.format function to help translation of dynamic strings
        if (!String.prototype.format) {
            String.prototype.format = function() {
                var args = arguments;
                return this.replace(/{(\d+)}/g, function(match, number) {
                return typeof args[number] != 'undefined'
                    ? args[number]
                    : match
                ;
                });
            };
        }

        let language = getCookie("language");
        if(!language)
        {
            language = "en";
        }

        i18next.init({
            lng: language,
            resources: {
                en: {
                    translation: {
                        rightbar: {
                            dashboard: "Dashboard",
                            pools: "Pools",
                            redeem: "Redeem",
                            documentation: "Documentation",
                            connectWallet: "Connect Wallet",
                            announcement: "Announcement",
                            announcementMsg: "We are happy and excited to announce that we are going to include more exciting strategies to the platform contract. Hence, we will be introducing V2 which will bring more benefits to the community. Stay tuned and meanwhile, please withdraw your funds from the DAI Treasury Pool and Uniswap DAI/LFI LP Treasury Pool.",

                            homeContent: "Levf is a leveraged yield farming and risk adjustment protocol that bridges the capital and risk limitations of participants, creating additional opportunities for both.",
                            learnMore: "Learn More",

                            home: "Home",
                            refresh: "Refresh",

                            overview: "Overview",
                            tvl: "Total Value Locked",
                            na: "-NA-",
                            availableSupply: "Utilisation / Available Treasury Pool Supply",
                            reservePool: "Reserve Pool",
                            borrowerInterest: "Borrower Interest",
                            lfiPrice: "LFI Price",
                            epoch: "Epoch",
                            currentEpoch: "Current Epoch",
                            nextEpochStart: "Next Epoch Start",
                            epochEndingIn: "Epoch Ending In:",
                            portfolio: "Portfolio",
                            estimatedEarnings: "Estimated Earnings",
                            redeemableLfi: "Redeemable LFI",
                            estimatedLfi: "Estimated LFI (Current Epoch)",
                            lfiPopover: "LFI is the governance token for Levf. There are only 100,000 LFI and they will be distributed to Levf liquidity providers over 20 weeks. LFI can be redeemed together with liquidity provided at the end of every Epoch.",
                            contractAddresses: "Contract Addresses",

                            assetPools: "Asset Supply Treasury Pools",
                            daiTreasuryPool: "DAI Treasury Pool",
                            apyDai: "APY (DAI):",
                            apyLfi: "APY (LFI):",
                            depositDai: "Deposit DAI",
                            uniDaiLfiPool: "DAI/LFI UNI LP Token Pool",
                            depositUniDaiLfi: "Deposit DAI/LFI UNI LP",
                            sushiDaiLfiPool: "DAI/LFI SUSHI LP Token Pool",
                            comingSoon: "Coming Soon!",
                            farmingPools: "Farming Pools (20x Leverage)",
                            farmingPoolsHeaderMsg: "Please be patient, the farming pools will be launched after the contract audit is completed.",
                            yearnDaiVault: "Yearn DAI Vault",
                            apy: "APY:",
                            leveragedApy: "Leveraged APY: ",
                            curveDaiPool: "Curve DAI 3Pool",
                            creamDaiPool: "Cream DAI Pool",
                            harvestDaiPool: "Harvest DAI Pool",
                            compoundDaiPool: "Compound DAI Pool",
                            aaveDaiPool: "Aave DAI Pool",
                            yearn: "Yearn",
                            curve: "Curve",
                            cream: "Cream",
                            harvest: "Harvest",
                            compound: "Compound",
                            aave: "Aave",
                            earn: "Earn:",

                            redeemLfiDaiPool: "LFI - DAI Pool",
                            redeemLfi: "Redeem LFI",
                            redeemLfiInfo: "LFI rewards will be available for redemption only at the end of each epoch. LFI not redeemed will be accumulated and available to redeem at any time.",
                            redeemLfiUniDaiLfiPool: "LFI - DAI/LFI UNI LP Pool",
                            redeemDai: "Redeem DAI",
                            redeemLiquidityInfo: "Liquidity provided can be redeemed at anytime. However, you give up any LFI rewards accumulated for the current epoch if liquidity is redeemed before the end of epoch.",
                            redeemUniDaiLfi: "Redeem DAI/LFI UNI LP",
                            redeemFarmingInfo: "DAI can be redeemed from the farming pool at anytime. A 10% tax will be levied on the net profit with proceeds going to the reserve pool. The borrowed liquidity will also be returned to the Asset Treasury Pool along with the interest owed.",
                        },
                        modalConnectWallet: {
                            title: "Connect Your Wallet",
                            connectMetamaskMobileMsg: "Tap the button below to <b>Open Metamask.</b> Please access this site on Metamask's in-app browser for a seamless experience.",
                            cancel: "Cancel"
                        },
                        depositTreasuryPoolPopup: {
                            title: " Deposit DAI",
                            selectAmount: "Select Amount",
                            availableToken: "Available DAI",
                            usePercentAvailable: "Use % Of Available Amount",
                            depositAmount: "Deposit Amount",
                            na: "-NA-",
                            confirmDeposit: "Confirm Deposit",
                            cancel: "Cancel"
                        },
                        redeemTreasuryPoolPopup: {
                            title: " Redeem DAI",
                            selectAmount: "Select Amount",
                            tokenHeld: "LDai Held",
                            redeemPercentAvailable: "Redeem % Of Available Amount",
                            redeemAmount: "Redeem Amount",
                            na: "-NA-",
                            confirmRedeem: "Confirm Redemption",
                            cancel: "Cancel"
                        },
                        depositFarmingPoolPopup: {
                            title: " Deposit DAI in Yearn DAI Vault",
                            selectAmount: "Select Amount",
                            availableToken: "Available DAI",
                            usePercentAvailable: "Use % Of Available Amount",
                            depositAmount: "Deposit Amount",
                            na: "-NA-",
                            availableTreasuryPoolToken: "Available DAI in Treasury Pool",
                            borrowedAmount: "Borrowed Amount",
                            confirmDeposit: "Confirm Deposit",
                            cancel: "Cancel"
                        },
                        redeemFarmingPoolPopup: {
                            title: " Redeem DAI",
                            selectAmount: "Select Amount",
                            tokenHeld: "BDai Held",
                            redeemPercentAvailable: "Redeem % Of Available Amount",
                            redeemAmount: "Redeem Amount",
                            na: "-NA-",
                            confirmRedeem: "Confirm Redemption",
                            cancel: "Cancel"
                        },
                        redeemLfiPopup: {
                            title: " Redeem LFI",
                            redeemLfi: "Redeem LFI",
                            redeemableLfi: "Redeemable LFI",
                            lfiReward: "LFI Reward",
                            epoch: "Epoch",
                            na: "-NA-",
                            confirmRedeem: "Confirm Redemption",
                            cancel: "Cancel"
                        },
                        levfAlertPopup: {
                            confirm: "Confirm",
                        },
                        estimatedLfiPopoverTitle: "Estimated LFI",
                        estimatedLfiPopoverContent: "Estimated LFI is an estimate of LFI rewards based on the liquidity provided as a proportion of the total liquidity pool currently and period of time left for the epoch.",
                        uniDaiLfiPopoverTitle: "DAI/LFI UNI V2 LP Token",
                        uniDaiLfiPopoverContent: "DAI/LFI UNI V2 LP Tokens can be acquired by adding liquidity to the DAI/LFI liquidity pair on Uniswap <a href='{0}' target='_blank'>here</a>.",

                        ended: "Ended",
                        [AdaptorEnum.DaiYearn]: "Yearn DAI Vault",
                        treasuryPoolDepositTitle: " Deposit {0}",
                        getUnderlyingAsset: "(Get {0})",
                        farmingPoolDepositTitle: " Deposit {0} in {1} (Borrowing Interest: {2}%)",
                        availableToken: "Available {0}",
                        availableTokenInTreasuryPool: "Available {0} in Treasury Pool",
                        redeemTokenTitle: " Redeem {0}",
                        redeemTokenFromFarmingPoolTitle: " Redeem {0} from {1}",
                        tokenHeld: "{0} Held",

                        noRedeeemableLfiTitle: "No Redeemable LFI",
                        noRedeeemableLfiContent: "<h5></i> There is currently no redeemable LFI. </h5><br>",
                        approveTitle: "Approving {0}",
                        approveContent: "<h5><i class = 'fa fa-spin fa-refresh'></i> Please approve pool to spend {0}</h5><br>",
                        depositTitle: "Depositing {0}",
                        depositContent: "<h5><i class = 'fa fa-spin fa-refresh'></i> Deposit {0} into the pool</h5><br>",
                        depositSuccessTitle: "Successful Deposit",
                        depositSuccessContent: "<h5>Your {0} was deposited into the pool</h5><br>",
                        redeemTitle: "Redeeming {0}",
                        redeemContent: "<h5><i class = 'fa fa-spin fa-refresh'></i> Redeeming from the pool, please wait</h5><br>",
                        redeemSuccessTitle: "Successful Redemption",
                        redeemSuccessContent: "<h5></i> Your redemption was successful!</h5><br>",
                        estimatingLfiTitle: "Please try again later",
                        estimatingLfiContent: "<h5><i class = 'fa fa-spin fa-refresh'></i> Calculating redeemable LFI, please try again later. </h5><br>",
                        insufficientLiquidityTitle: "Insufficient Liquidity",
                        insufficientLiquidityContent: "There is insufficient liquidity in the pool for borrowing.<br />Available liquidity: {0} {1}",
                        invalidAmountTitle: "Invalid Amount",
                        invalidAmountContent: "Please enter a valid amount!",
                        invalidEntryTitle: "Invalid Entry",
                        invalidEntryContent: "Please enter a valid amount with maximum of 18 decimal places!",
                        removeLiquidityErrorTitle: "Remove Liquidity Error",
                        redeemLfiErrorTitle: "Redeem LFI Error",
                        metamaskNotFoundTitle: "MetaMask Not Found!",
                        metamaskNotFoundContent: "Please install MetaMask: <a href='https://metamask.io/'' target='_blank'>https://metamask.io/</a>",
                        wrongNetworkTitle: "Wrong Ethereum Network!",
                        wrongNetworkContent: "Please connect MetaMask to the Ethereum Mainnet or Kovan test network!",
                        approveErrorTitle: "Approve Error",
                        addLiquidityErrorTitle: "Add Liquidity Error",
                    }
                },
                zh_CN: {
                    translation: {
                        rightbar: {
                            dashboard: "仪表盘",
                            pools: "池",
                            redeem: "赎回",
                            documentation: "文献记录",
                            connectWallet: "连接钱包",
                            announcement: "通告",
                            announcementMsg: "我们很高兴和兴奋地宣布，我们将在平台合约中加入更多令人振奋的新策略。 因此，我们将推出崭新的 V2，为社区带来更多好处。 请继续密切关注我们，同时请从 DAI 资金池和 Uniswap DAI/LFI LP 资金池中将您的资金撤回。谢谢。",

                            homeContent: "Levf金融是一款弥合参与者风险限制和资本限制的杠杆收益耕作兼风险调整协议；同时为两者创造更多的收益。",
                            learnMore: "更多详情",

                            home: "首页",
                            refresh: "刷新",

                            overview: "概述",
                            tvl: "总锁定价值",
                            na: "-不适用-",
                            availableSupply: "使用率 / 可用资金池额度",
                            reservePool: "储备池",
                            borrowerInterest: "借款利息",
                            lfiPrice: "LFI 价格",
                            epoch: "时期",
                            currentEpoch: "现时期",
                            nextEpochStart: "下时期开端",
                            epochEndingIn: "时期结束于:",
                            portfolio: "投资组合",
                            estimatedEarnings: "预估收益",
                            redeemableLfi: "可赎回 LFI",
                            estimatedLfi: "预估 LFI （现时期)",
                            lfiPopover: "LFI 是 Levf 的管治代币。 总发行量只限 100,000 枚 LFI，并将在 20 周期内分发给 Levf 的资金提供者。 LFI 可在每周期结束后与资金一起领。",
                            contractAddresses: "合约地址",

                            assetPools: "资金提供池",
                            daiTreasuryPool: "DAI 资金池",
                            apyDai: "年益率 (DAI): ",
                            apyLfi: "年益率 (LFI): ",
                            depositDai: "存入 DAI",
                            uniDaiLfiPool: "DAI/LFI UNI LP 质押池",
                            depositUniDaiLfi: "存入 DAI/LFI UNI LP",
                            sushiDaiLfiPool: "DAI/LFI SUSHI LP 质押池",
                            comingSoon: "即将推出！",
                            farmingPools: "耕作池 (20x 杠杆)",
                            farmingPoolsHeaderMsg: "请耐心等待，合约审核完成后将启动耕作池。",
                            yearnDaiVault: "Yearn DAI 池",
                            apy: "年益率: ",
                            leveragedApy: "杠杆后的年益率: ",
                            curveDaiPool: "Curve DAI 池",
                            creamDaiPool: "Cream DAI 池",
                            harvestDaiPool: "Harvest DAI 池",
                            compoundDaiPool: "Compound DAI 池",
                            aaveDaiPool: "Aave DAI 池",
                            yearn: "Yearn",
                            curve: "Curve",
                            cream: "Cream",
                            harvest: "Harvest",
                            compound: "Compound",
                            aave: "Aave",
                            earn: "赚取:",

                            redeemLfiDaiPool: "LFI - DAI 资金池",
                            redeemLfi: "领取LFI",
                            redeemLfiInfo: "LFI 奖励仅限在每周期结束后可领。 未领的 LFI 将被累积，并随时可领。",
                            redeemLfiUniDaiLfiPool: "LFI - DAI/LFI UNI LP 质押池",
                            redeemDai: "领取DAI",
                            redeemLiquidityInfo: "所注入的资金随时可领出。但是，如在周期未结束前将资金领出，您将承认放弃当前周期所累积的任何LFI 奖励。",
                            redeemUniDaiLfi: "领取 DAI/LFI UNI LP",
                            redeemFarmingInfo: "DAI 随时都可从资金池中领取。净利润将被征收 10% 的税，并将其投入储备池中。借贷资金也将连同所欠利息，一起返还至资金池。",
                        },
                        modalConnectWallet: {
                            title: "连接钱包",
                            connectMetamaskMobileMsg: "点按以下按钮以<b>打开 Metamask。</b>请在 Metamask 应用程序内的浏览器上访问此站点，以获得最佳的用户体验。",
                            cancel: "取消"
                        },
                        depositTreasuryPoolPopup: {
                            title: " 存入DAI",
                            selectAmount: "选择数额",
                            availableToken: "DAI 余额",
                            usePercentAvailable: "可用余额 %",
                            depositAmount: "存入数额",
                            na: "-不适用-",
                            confirmDeposit: "存数确认",
                            cancel: "取消"
                        },
                        redeemTreasuryPoolPopup: {
                            title: " 领取DAI",
                            selectAmount: "选择数额",
                            tokenHeld: "持有DAI",
                            redeemPercentAvailable: "可领取余额 %",
                            redeemAmount: "可领数额",
                            na: "-不适用-",
                            confirmRedeem: "确认领取",
                            cancel: "取消"
                        },
                        depositFarmingPoolPopup: {
                            title: " 【Yearn DAI池】存入DAI (借贷利息：10%)",
                            selectAmount: "选择数额",
                            availableToken: "DAI 余额",
                            usePercentAvailable: "可用余额 %",
                            depositAmount: "存入数额",
                            na: "-不适用-",
                            availableTreasuryPoolToken: "资金池DAI 余额",
                            borrowedAmount: "借贷数额",
                            confirmDeposit: "存数确认",
                            cancel: "取消"
                        },
                        redeemFarmingPoolPopup: {
                            title: " 领取DAI",
                            selectAmount: "选择数额",
                            tokenHeld: "持有DAI",
                            redeemPercentAvailable: "可领取余额 %",
                            redeemAmount: "可领数额",
                            na: "-不适用-",
                            confirmRedeem: "确认领取",
                            cancel: "取消"
                        },
                        redeemLfiPopup: {
                            title: " 领取LFI",
                            redeemLfi: "领取LFI",
                            redeemableLfi: "可领取的LFI",
                            lfiReward: "LFI 奖励",
                            epoch: "时期",
                            na: "-不适用-",
                            confirmRedeem: "确认领取",
                            cancel: "取消"
                        },
                        levfAlertPopup: {
                            confirm: "确认",
                        },
                        estimatedLfiPopoverTitle: "预估 LFI",
                        estimatedLfiPopoverContent: "估计可得的 LFI 是根据当前提供的资金占当前资金池中的比例以及该周期的剩余时间所计算出 LFI 奖励的估计数。",
                        uniDaiLfiPopoverTitle: "DAI/LFI UNI V2 LP 质押",
                        uniDaiLfiPopoverContent: "DAI/LFI UNI V2 LP 代币可以通过 Uniswap 上的 DAI/LFI 配对注入资金，便以<a href='{0}' target='_blank'>获得</a>。",

                        ended: "结束",
                        [AdaptorEnum.DaiYearn]: "Yearn DAI 池",
                        treasuryPoolDepositTitle: " 存入{0}",
                        getUnderlyingAsset: "(获取{0})",
                        farmingPoolDepositTitle: " 【{1}】存入{0} (借贷利息：{2}%)",
                        availableToken: "{0} 余额",
                        availableTokenInTreasuryPool: "资金池{0} 余额",
                        redeemTokenTitle: " 领取{0}",
                        redeemTokenFromFarmingPoolTitle: " 从{1} 领取{0}",
                        tokenHeld: "持有{0}",

                        noRedeeemableLfiTitle: "无LFI可领取",
                        noRedeeemableLfiContent: "<h5></i> 目前没有可领取的 LFI。 </h5><br>",
                        approveTitle: "{0} 批准当中",
                        approveContent: "<h5><i class = 'fa fa-spin fa-refresh'></i> 请批准采用池里的{0}</h5><br>",
                        depositTitle: "{0} 注入当中",
                        depositContent: "<h5><i class = 'fa fa-spin fa-refresh'></i> 正在将{0} 注入池中</h5><br>",
                        depositSuccessTitle: "成功注入",
                        depositSuccessContent: "<h5>您的 {0} 已存入池中 </h5><br>",
                        redeemTitle: "领取{0} 当中",
                        redeemContent: "<h5><i class = 'fa fa-spin fa-refresh'></i> 正在领取当中，请稍等</h5><br>",
                        redeemSuccessTitle: "成功领取",
                        redeemSuccessContent: "<h5></i>领取成功!</h5><br>",
                        estimatingLfiTitle: "请稍后再试",
                        estimatingLfiContent: "<h5><i class = 'fa fa-spin fa-refresh'></i> 正在计算可领取的 LFI，请稍后再试。</h5><br>",
                        insufficientLiquidityTitle: "余额不足",
                        insufficientLiquidityContent: "资金池余额不足，无法借贷。<br />可用余额：{0} {1}",
                        invalidAmountTitle: "数额无效",
                        invalidAmountContent: "请输入有效数额。",
                        invalidEntryTitle: "输入无效",
                        invalidEntryContent: "请输入有效数额 (最多 18 位小数)",
                        removeLiquidityErrorTitle: "消除资金错误",
                        redeemLfiErrorTitle: "领取LFI 错误",
                        metamaskNotFoundTitle: "未找到 MetaMask！",
                        metamaskNotFoundContent: "请安装 MetaMask （狐狸钱包）：<a href='https://metamask.io/' target='_blank'>https://metamask.io/</a>",
                        wrongNetworkTitle: "错误的以太坊网络！",
                        wrongNetworkContent: "请将 MetaMask 连接到 Ethereum Mainnet（以太坊主网）或 Kovan 测试网络！",
                        approveErrorTitle: "批准错误",
                        addLiquidityErrorTitle: "注入资金错误",
                    }
                }
            }
        }, function(err, t) {
            // for options see
            // https://github.com/i18next/jquery-i18next#initialize-the-plugin
            jqueryI18next.init(i18next, $);
            localizePage();
        });

        i18next.on("languageChanged", () => {
            setCookie("language", i18next.language);
            localizePage();
            if(ethConnected)
            {
                updateContracts();
            }
        });

        if(/Android|iPhone|iPad/i.test(navigator.userAgent))
        {
            socialBar.style.top = "55%";
            connectMetamaskMobileMsg.style.display = "block";
        }
    }

    async function connectWeb3()
    {
        console.log("connectWeb3()");
        //check for MetaMask
        if(typeof window.ethereum === "undefined")
        {
            if(/Android|iPhone|iPad/i.test(navigator.userAgent))
            {
                let url = "levf.finance";
                if(window.location.host != url)
                {
                    url = "testnet.levf.finance";
                }
                window.open("https://metamask.app.link/dapp/" + url, '_blank').focus();
                return;
            }

            //notify need to install MetaMask
            levfAlert(i18next.t("metamaskNotFoundContent"), i18next.t("metamaskNotFoundTitle"));
            return;
        }

        ethereum.on("accountsChanged", (accounts) =>
        {
            // Handle the new accounts, or lack thereof.
            currentAccount = ethereum.selectedAddress;

            //hide connect wallet button
            btnConnectWallet.classList.add("hide");
            //show address button
            spanConnected.textContent = currentAccount.substr(0, 6) + "..." + currentAccount.substr(-4);
            btnConnected.classList.remove("hide");

            console.log("currentAccount:", currentAccount);
            console.log("Wallet is MetaMask:", ethereum.isMetaMask);

            ethConnected = true;
            chainInfo = chainIds.find(chain => chain.chainId == ethereum.networkVersion);
            console.log("chain name", chainInfo.name);
            currentAccount = ethereum.selectedAddress;

            if(ethereum.networkVersion != 1)
            {
                btnNetwork.classList.remove("hide");
                spanNetwork.textContent = chainInfo.network;
            }

            updateContracts();
        });

        ethereum.on("chainChanged", (chainId) =>
        {
            // Handle the new chain.
            // Correctly handling chain changes can be complicated.
            // We recommend reloading the page unless you have a very good reason not to.
            window.location.reload();
        });

        ethereum.on("connect", (info) =>
        {
            console.log("connect", JSON.stringify(info));
        });

        ethereum.on("disconnect", (info) =>
        {
            console.log("disconnect", JSON.stringify(info));
            //hide connected button
            btnConnected.classList.add("hide");
            btnNetwork.classList.add("hide");
            //show connect button
            btnConnectWallet.disabled = false;
            iconConnectWallet.classList.remove("hide");
            spanConnectWallet.classList.add("hide");
        });

        // disable connect wallet button and show spinner
        btnConnectWallet.disabled = true;
        iconConnectWallet.classList.add("hide");
        spanConnectWallet.classList.remove("hide");

        //new web3 instance
        window.web3 = new Web3(window.ethereum);
        //try to connect to extension wallet
        conn = await window.ethereum.enable();

        //check if connection was successful
        console.log("ethereum.isConnected(): ", ethereum.isConnected());

        ethConnected = conn.length > 0;
        console.log("ethConnected: " + ethConnected);

        //if connected show account details and set currentAddress
        if(ethConnected)
        {
            chainInfo = chainIds.find(chain => chain.chainId == ethereum.networkVersion);
            console.log("chain name ", chainInfo.name);

            currentAccount = ethereum.selectedAddress;

            //update dashboard page
            await updateContracts();

            //hide connect wallet button
            btnConnectWallet.classList.add("hide");
            //show address button
            spanConnected.textContent = currentAccount.substr(0, 6) + "..." + currentAccount.substr(-4);
            btnConnected.classList.remove("hide");
            if(ethereum.networkVersion != 1)
            {
                btnNetwork.classList.remove("hide");
                spanNetwork.textContent = chainInfo.network;
            }

            console.log("currentAccount:", currentAccount);

            console.log("Wallet is MetaMask:", ethereum.isMetaMask);
            console.log("Ethereum chainId:", ethereum.networkVersion);
        }
        else
        {
            //hide connected button
            btnConnected.classList.add("hide");
            btnNetwork.classList.add("hide");
            //show connect button
            btnConnectWallet.disabled = false;
            iconConnectWallet.classList.remove("hide");
            spanConnectWallet.classList.add("hide");
        }
    }

    async function updateContracts()
    {
        console.log("updateContracts");
        if(!ethConnected) await connectWeb3();

        if(!currentAccount || currentAccount.length == 0) return;

        if(/*ethereum.networkVersion!= 3 && */ethereum.networkVersion != 1 && ethereum.networkVersion != 42)
        {
            levfAlert(i18next.t("wrongNetworkContent"), i18next.t("wrongNetworkTitle"));
            return;
        }

        //get LFI contract
        contractLFI = new web3.eth.Contract(abiLFI, addressLFI[chainInfo.shortName]);
        console.log("addressLFI: ", addressLFI[chainInfo.shortName]);

        //get LDai contract
        contractLDai = new web3.eth.Contract(abiLDai, addressLDai[chainInfo.shortName]);
        console.log("addressLDai: ", addressLDai[chainInfo.shortName]);

        //get LUniDaiLfi contract
        contractLUniDaiLfi = new web3.eth.Contract(abiLUniDaiLfi, addressLUniDaiLfi[chainInfo.shortName]);
        console.log("addressLUniDaiLfi: ", addressLUniDaiLfi[chainInfo.shortName]);

        //get DAI contract
        contractDAI = new web3.eth.Contract(abiDAI, addressDAI[chainInfo.shortName]);
        console.log("addressDAI: ", addressDAI[chainInfo.shortName]);

        //get DAI/LFI UNI v2 LP token (UniDaiLfi) contract
        contractUniDaiLfi = new web3.eth.Contract(abiUniDaiLfi, addressUniDaiLfi[chainInfo.shortName]);
        console.log("addressUniDaiLfi: ", addressUniDaiLfi[chainInfo.shortName]);

        //get DAI pool Dsec Distribution contract
        contractDsecDistDai = new web3.eth.Contract(abiDsecDist, addressDsecDistDai[chainInfo.shortName]);
        console.log("addressDsecDistDai: ", addressDsecDistDai[chainInfo.shortName]);

        //get DAI/LFI Uniswap LP pool Dsec Distribution contract
        contractDsecDistUniDaiLfi = new web3.eth.Contract(abiDsecDist, addressDsecDistUniDaiLfi[chainInfo.shortName]);
        console.log("addressDsecDistUniDaiLfi: ", addressDsecDistUniDaiLfi[chainInfo.shortName]);

        //get DAI Treasury Pool contract
        contractTreasuryPoolDai = new web3.eth.Contract(abiTreasuryPoolDai, addressTreasuryPoolDai[chainInfo.shortName]);
        console.log("addressTreasuryPoolDai: ", addressTreasuryPoolDai[chainInfo.shortName]);

        //get DAI/LFI UNI v2 LP token (UniDaiLfi) Treasury Pool contract
        contractTreasuryPoolUniDaiLfi = new web3.eth.Contract(abiTreasuryPoolUniDaiLfi, addressTreasuryPoolUniDaiLfi[chainInfo.shortName]);
        console.log("addressTreasuryPoolUniDaiLfi: ", addressTreasuryPoolUniDaiLfi[chainInfo.shortName]);

        farmingPoolAddresses = await contractTreasuryPoolDai.methods.farmingPoolAddresses().call().catch((e) =>
        {
            console.log(`Error contractTreasuryPoolDai.farmingPoolAddresses: ${e.message}`);
        });
        if(farmingPoolAddresses != undefined && farmingPoolAddresses.length > 0)
        {
            headerFarmingPoolRedeem.style.display = "block";
            for(let i = 0; i < farmingPoolAddresses.length; i++)
            {
                let contractFarmingPool = new web3.eth.Contract(abiFarmingPool, farmingPoolAddresses[i]);
                let nameFarmingPool = await contractFarmingPool.methods.name().call().catch((e) =>
                {
                    console.log(`Error contractYearnDaiPool.btokenAddress: ${e.message}`);
                });

                switch(nameFarmingPool)
                {
                    case AdaptorEnum.DaiYearn:
                        addressYearnDaiPool = farmingPoolAddresses[i];
                        contractYearnDaiPool = contractFarmingPool;
                        console.log("addressYearnDaiPool: ", addressYearnDaiPool);

                        addressBDai = await contractYearnDaiPool.methods.btokenAddress().call().catch((e) =>
                        {
                            console.log(`Error contractYearnDaiPool.btokenAddress: ${e.message}`);
                        });

                        contractBDai = new web3.eth.Contract(abiBDai, addressBDai);
                        console.log("addressBDai: ", addressBDai);

                        spanTreasuryPoolDaiAPYDai.style.display = "block";
                        divDashboardContractAddressYearnDaiVault.style.display = "block";
                        divPoolsContractAddressYearnDaiVault.style.display = "block";

                        txtYearnDaiPoolLink.textContent = i18next.t(AdaptorEnum.DaiYearn);
                        imgYearnDaiPool.style.display = "inline-block";
                        divYearnDaiPoolApy.style.display = "block";
                        btnYearnPoolDepositDai.disabled = false;
                        btnYearnPoolDepositDai.textContent = i18next.t("rightbar.depositDai");

                        divYearnDaiRedeem.style.display = "flex";
                        break;
                }
            }
        }
        else
        {
            farmingPoolsHeaderMsg.style.display = "block";
        }

        updateLinks();
        //update balances
        await updateEpochData();
        await updateBalances();
    }

    function updateLinks()
    {
        txtTokenLDaiLink.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressLDai[chainInfo.shortName]);
        txtTokenLUniDaiLfiLink.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressLUniDaiLfi[chainInfo.shortName]);
        txtTokenLFILink.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressLFI[chainInfo.shortName]);
        txtTreasuryPoolDaiLink.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressTreasuryPoolDai[chainInfo.shortName]);
        txtTreasuryPoolUniDaiLfiLink.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressTreasuryPoolUniDaiLfi[chainInfo.shortName]);

        // update contract addresses section (dashboard + pools)
        txtDashboardContractAddressLfi.textContent = txtPoolsContractAddressLfi.textContent = addressLFI[chainInfo.shortName];
        txtDashboardContractAddressLfi.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressLFI[chainInfo.shortName]);
        txtPoolsContractAddressLfi.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressLFI[chainInfo.shortName]);

        txtDashboardContractAddressDaiTreasuryPool.textContent = txtPoolsContractAddressDaiTreasuryPool.textContent = addressTreasuryPoolDai[chainInfo.shortName];
        txtDashboardContractAddressDaiTreasuryPool.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressTreasuryPoolDai[chainInfo.shortName]);
        txtPoolsContractAddressDaiTreasuryPool.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressTreasuryPoolDai[chainInfo.shortName]);

        txtDashboardContractAddressUniDaiLfiPool.textContent = txtPoolsContractAddressUniDaiLfiPool.textContent = addressTreasuryPoolUniDaiLfi[chainInfo.shortName];
        txtDashboardContractAddressUniDaiLfiPool.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressTreasuryPoolUniDaiLfi[chainInfo.shortName]);
        txtPoolsContractAddressUniDaiLfiPool.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressTreasuryPoolUniDaiLfi[chainInfo.shortName]);

        if(addressYearnDaiPool)
        {
            txtYearnDaiPoolLink.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressYearnDaiPool);
            txtDashboardContractAddressYearnDaiVault.textContent = txtPoolsContractAddressYearnDaiVault.textContent = addressYearnDaiPool;
            txtDashboardContractAddressYearnDaiVault.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressYearnDaiPool);
            txtPoolsContractAddressYearnDaiVault.setAttribute("href", etherscanAddressUrl[chainInfo.shortName] + addressYearnDaiPool);
        }

        infoUniDaiLfi.setAttribute('data-content', i18next.t("uniDaiLfiPopoverContent").format("https://app.uniswap.org/#/add/v2" + (chainInfo ? "/" + addressDAI[chainInfo.shortName] + "/" + addressLFI[chainInfo.shortName] : "")));
    }

    async function updateBalances()
    {
        console.log("updateBalances");
        if(!ethConnected) await connectWeb3();

        if(!currentAccount || currentAccount.length == 0) return;

        if(/*ethereum.networkVersion!= 3 && */ethereum.networkVersion != 1 && ethereum.networkVersion != 42)
        {
            levfAlert(i18next.t("wrongNetworkContent"), i18next.t("wrongNetworkTitle"));
            return;
        }

        //show spinner, disable refresh buttons
        for(let i = 0; i < btnsRefresh.length; i++)
        {
            btnsRefresh[i].firstElementChild.classList.add("fa-spin");
            btnsRefresh[i].disabled = true;
        }

        for(let field of updatableFields)
        {
            window[field].innerHTML = '<i class = "fa fa-refresh fa-spin fa-fw"></i>';
        }

        /**** start tasks to get data asynchronously ****/
        let tasks = [];
        let balanceLDai;
        tasks.push(async () =>
        {
            balanceLDai = await contractLDai.methods.balanceOf(currentAccount).call().catch((e) =>
            {
                console.log(`Error balanceLDai: ${e.message}`);
            });
            balanceLDai = new BigNumber(balanceLDai);
        });

        let balanceLFI;
        tasks.push(async () =>
        {
            balanceLFI = await contractLFI.methods.balanceOf(currentAccount).call().catch((e) =>
            {
                console.log(`Error balanceLFI: ${e.message}`);
            });
            balanceLFI = new BigNumber(balanceLFI);
        });

        let balanceLUniDaiLfi;
        tasks.push(async () =>
        {
            balanceLUniDaiLfi = await contractLUniDaiLfi.methods.balanceOf(currentAccount).call().catch((e) =>
            {
                console.log(`Error balanceLUniDaiLfi: ${e.message}`);
            });
            balanceLUniDaiLfi = new BigNumber(balanceLUniDaiLfi);
        });

        let balanceBDai = new BigNumber(0);
        tasks.push(async () =>
        {
            if(contractBDai)
            {
                balanceBDai = await contractBDai.methods.balanceOf(currentAccount).call().catch((e) =>
                {
                    console.log(`Error balanceBDai: ${e.message}`);
                });
                balanceBDai = new BigNumber(balanceBDai);
            }
        });

        let balanceDaiReservePool;
        tasks.push(async () =>
        {
            balanceDaiReservePool = await contractDAI.methods.balanceOf(addressReservePool[chainInfo.shortName]).call().catch((e) =>
            {
                console.log(`Error balanceDaiReservePool: ${e.message}`);
            });
            balanceDaiReservePool = new BigNumber(balanceDaiReservePool);
        });

        let treasuryPoolDaiAmtTotal;
        tasks.push(async () =>
        {
            treasuryPoolDaiAmtTotal = await contractTreasuryPoolDai.methods.totalUnderlyingAssetAmount().call().catch((e) =>
            {
                console.log(`Error treasuryPoolDaiAmtTotal: ${e.message}`);
            });
            treasuryPoolDaiAmtTotal = new BigNumber(treasuryPoolDaiAmtTotal);
        });

        let yearnDaiPoolDaiAmtTotal = new BigNumber(0);
        tasks.push(async () =>
        {
            if(contractYearnDaiPool)
            {
                yearnDaiPoolDaiAmtTotal = await contractYearnDaiPool.methods.totalUnderlyingAsset().call().catch((e) =>
                {
                    console.log(`Error yearnDaiPoolDaiAmtTotal: ${e.message}`);
                });
                yearnDaiPoolDaiAmtTotal = new BigNumber(yearnDaiPoolDaiAmtTotal);
            }
        });

        let totalSupplyUniDaiLfi;
        tasks.push(async () =>
        {
            totalSupplyUniDaiLfi = await contractUniDaiLfi.methods.totalSupply().call().catch((e) =>
            {
                console.log(`Error totalSupplyUniDaiLfi: ${e.message}`);
            });
            totalSupplyUniDaiLfi = new BigNumber(totalSupplyUniDaiLfi);
        });

        let treasuryPoolUniDaiLfiAmtTotal;
        tasks.push(async () =>
        {
            treasuryPoolUniDaiLfiAmtTotal = await contractTreasuryPoolUniDaiLfi.methods.totalUnderlyingAssetAmount().call().catch((e) =>
            {
                console.log(`Error treasuryPoolUniDaiLfiAmtTotal: ${e.message}`);
            });
            treasuryPoolUniDaiLfiAmtTotal = new BigNumber(treasuryPoolUniDaiLfiAmtTotal);
        });

        let response, prices;
        tasks.push(async () =>
        {
            response = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=dai&vs_currencies=usd");
            prices = await response.json();
        });

        let yearnResponse, yearnVaults, yearnAPR;
        tasks.push(async () =>
        {
            yearnResponse = await fetch("https://api.yearn.finance/v1/chains/1/vaults/all");
            yearnVaults = await yearnResponse.json();
            let vault = yearnVaults.find(yearnVault => yearnVault["address"] == "0x19D3364A399d251E894aC732651be8B0E4e85001");
            yearnAPR = vault["apy"]["net_apy"];
        });

        let uniswapJson, uniswapFetchSuccess = false;
        if(uniswapGraphUrl[chainInfo.shortName] != undefined && addressUniDaiLfi[chainInfo.shortName] != undefined)
        {
            tasks.push(async () =>
            {
                var myHeaders = new Headers();
                myHeaders.append("Content-Type", "application/json");

                var raw = JSON.stringify({"query" : `{ pair(id: \"${addressUniDaiLfi[chainInfo.shortName]}\") { token0 { id symbol } token1 { id symbol } token0Price token1Price reserve0 reserve1 }}`, "variables" : null});

                var requestOptions = {
                    method: 'POST',
                    headers: myHeaders,
                    body: raw,
                    redirect: 'follow'
                };

                await fetch(uniswapGraphUrl[chainInfo.shortName], requestOptions)
                    .then(response => response.text())
                    .then(result => {
                        uniswapFetchSuccess = true;
                        uniswapJson = JSON.parse(result);
                        console.log("result: " + result);
                    })
                    .catch(error => console.log('error', error));
            });
        }

        tasks.push(async () =>
        {
            rewardPerEpoch_Dai = await contractTreasuryPoolDai.methods.lpRewardPerEpoch().call().catch((e) =>
            {
                console.log(`Error contractTreasuryPoolDai.lpRewardPerEpoch: ${e.message}`);
            });
        });

        tasks.push(async () =>
        {
            rewardPerEpoch_UniDaiLfi = await contractTreasuryPoolUniDaiLfi.methods.lpRewardPerEpoch().call().catch((e) =>
            {
                console.log(`Error contractTreasuryPoolUniDaiLfi.lpRewardPerEpoch: ${e.message}`);
            });
        });

        tasks.push(async () =>
        {
            teamRewardPerEpoch = await contractTreasuryPoolDai.methods.teamRewardPerEpoch().call().catch((e) =>
            {
                console.log(`Error contractTreasuryPoolDai.teamRewardPerEpoch: ${e.message}`);
            });
        });

        tasks.push(async () =>
        {
            if(contractYearnDaiPool)
            {
                farmingPoolLeverageFactor = await contractYearnDaiPool.methods.leverageFactor().call().catch((e) =>
                {
                    console.log(`Error contractYearnDaiPool.leverageFactor: ${e.message}`);
                });
            }
        });

        let treasuryPoolDaiAmtAvailable;
        tasks.push(async () =>
        {
            treasuryPoolDaiAmtAvailable = await contractTreasuryPoolDai.methods.getTotalUnderlyingAssetAvailable().call().catch((e) =>
            {
                console.log(`Error contractTreasuryPoolDai.getTotalUnderlyingAssetAvailable: ${e.message}`);
            });
            treasuryPoolDaiAmtAvailable = new BigNumber(treasuryPoolDaiAmtAvailable);
        });

        //run all tasks and wait for them to finish
        await Promise.all(tasks.map(p => p()));

        /**** fill in html with data ****/
        txtTokenLDai.textContent = txtRedeemLDai.textContent = balanceLDai.div(eth).toFixed(8);
        txtTokenLUniDaiLfi.textContent = txtRedeemLUniDaiLfi.textContent = balanceLUniDaiLfi.div(eth).toFixed(8);
        txtYearnDaiPoolAPY.textContent = (yearnAPR * 100).toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2}) + "%";
        txtYearnDaiPoolLevAPY.textContent = (yearnAPR * 100 * farmingPoolLeverageFactor).toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2}) + "%";
        txtYearnPoolRedeemBDai.textContent = balanceBDai.div(eth).toFixed(8);
        txtTokenLFI.textContent = balanceLFI.div(eth).toFixed(8);

        let priceDaiUsd = prices["dai"].usd;
        let priceLfiUsd = 0;
        let token0Value = 0, token1Value = 0;
        if(uniswapFetchSuccess && uniswapJson != undefined && uniswapJson.data.pair != undefined && uniswapJson.data.pair.token0.id == addressLFI[chainInfo.shortName].toLowerCase())
        {
            priceLfiUsd = uniswapJson.data.pair.token1Price * priceDaiUsd;
            txtTokenLFIPriceDashboard.textContent = txtTokenLFIPricePools.textContent = "$" + priceLfiUsd.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2});
            token0Value = uniswapJson.data.pair.reserve0 * priceDaiUsd;
            token1Value = uniswapJson.data.pair.reserve1 * priceLfiUsd;
        }
        else if(uniswapFetchSuccess && uniswapJson != undefined && uniswapJson.data.pair != undefined && uniswapJson.data.pair.token1.id == addressLFI[chainInfo.shortName].toLowerCase())
        {
            priceLfiUsd = uniswapJson.data.pair.token0Price * priceDaiUsd;
            txtTokenLFIPriceDashboard.textContent = txtTokenLFIPricePools.textContent = "$" + priceLfiUsd.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2});
            token0Value = uniswapJson.data.pair.reserve0 * priceLfiUsd;
            token1Value = uniswapJson.data.pair.reserve1 * priceDaiUsd;
        }

        // tvl = treasury pool dai + farming pool dai + unminted lfi + uniswap lp (dai + lfi reserve value) + reserve pool dai
        let treasuryPoolValue, uniswapLpValue;
        if(uniswapFetchSuccess)
        {
            treasuryPoolValue = treasuryPoolDaiAmtTotal.times(priceDaiUsd).div(eth).toNumber();
            let yearnDaiPoolValue = yearnDaiPoolDaiAmtTotal.times(priceDaiUsd).div(eth).toNumber();
            let unmintedLfiValue = new BigNumber(rewardPerEpoch_Dai).plus(new BigNumber(rewardPerEpoch_UniDaiLfi)).plus(new BigNumber(teamRewardPerEpoch)).times(totalNumberOfEpochs - currentEpoch).times(priceLfiUsd).div(eth).toNumber();
            uniswapLpValue = new BigNumber(token0Value).plus(new BigNumber(token1Value)).times(treasuryPoolUniDaiLfiAmtTotal).div(totalSupplyUniDaiLfi).toNumber();
            let reservePoolValue = balanceDaiReservePool.times(priceDaiUsd).div(eth).toNumber();
            let totalValueLocked = treasuryPoolValue + yearnDaiPoolValue + unmintedLfiValue + uniswapLpValue + reservePoolValue;
            txtTotalValueLockedDashboard.textContent = txtTotalValueLockedPools.textContent = "$" + totalValueLocked.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2});
        }

        // utilisation rate
        if(contractYearnDaiPool)
        {
            let utilisationRate = (new BigNumber(1)).minus(treasuryPoolDaiAmtAvailable.div(treasuryPoolDaiAmtTotal)).times(100);
            if (isNaN(utilisationRate)) utilisationRate = new BigNumber(0);
            txtAvailablePoolSupplyDashboard.textContent = txtAvailablePoolSupplyPools.textContent = utilisationRate.toFixed(2) + "% / " + treasuryPoolDaiAmtAvailable.div(eth).toFixed(8) + " DAI";
            txtReservePoolDashboard.textContent = txtReservePoolPools.textContent = balanceDaiReservePool.div(eth).toFixed(8) + " DAI";

            let utilisationRateStrArr = utilisationRate.toFixed(18).split(".");
            let utilisationRateHex = "0x" + (Number(utilisationRateStrArr[0]).toString(16).padStart(2, "0") + Number(utilisationRateStrArr[1]).toString(16)).padEnd(18, "0");
            yearnDaiBorrowerInterestRate = await contractYearnDaiPool.methods.getBorrowNominalAnnualRate(utilisationRateHex).call().catch((e) =>
            {
                console.log(`Error contractFarmingPool.getBorrowNominalAnnualRate: ${e.message}`);
            });
            txtTreasuryPoolDaiAPYDai.textContent = yearnDaiBorrowerInterestRate.toString() + "%";
        }
        else
        {
            txtAvailablePoolSupplyDashboard.textContent = txtAvailablePoolSupplyPools.textContent = "-NA-";
            txtReservePoolDashboard.textContent = txtReservePoolPools.textContent = "-NA-";
            txtTreasuryPoolDaiAPYDai.textContent = "-NA-";
        }

        if(currentEpoch < totalNumberOfEpochs)
        {
            if(uniswapFetchSuccess)
            {
                epochInSeconds = currentEpochEndTime - currentEpochStartTime;
                txtTreasuryPoolDaiAPYLfi.textContent = new BigNumber(rewardPerEpoch_Dai).times(priceLfiUsd).times(86400).times(365).div(epochInSeconds).div(Math.max(treasuryPoolValue, 1)).div(eth).times(100).toFixed(2) + "%";
                txtTreasuryPoolUniDaiLfiAPYLfi.textContent = new BigNumber(rewardPerEpoch_UniDaiLfi).times(priceLfiUsd).times(86400).times(365).div(epochInSeconds).div(Math.max(uniswapLpValue, 1)).div(eth).times(100).toFixed(2) + "%";
            }
        }
        else
        {
            txtTreasuryPoolDaiAPYLfi.textContent = txtTreasuryPoolUniDaiLfiAPYLfi.textContent = "0%";
        }

        //stop spinner, enable refresh buttons
        for(let i = 0; i < btnsRefresh.length; i++)
        {
            btnsRefresh[i].firstElementChild.classList.remove("fa-spin");
            btnsRefresh[i].disabled = false;
        }

        await estimateLFI();
    }

    async function estimateLFI()
    {
        console.log("estimateLFI");
        if(isEstimatingLFI) return;

        isEstimatingLFI = true;

        let hasUserRedeemed_Dai = [], hasUserRedeemed_UniDaiLfi = [];
        let hasUserRedeemedTasks = [], calculateRewardTasks = [];
        for(let i = 0; i < currentEpoch; i++)
        {
            hasUserRedeemedTasks.push(async () =>
            {
                hasUserRedeemed_Dai[i] = await contractDsecDistDai.methods.hasRedeemedDsec(currentAccount, i).call().catch((e) =>
                {
                    console.log(`Error contractDsecDistDai.hasRedeemedDsec: ${e.message}`);
                });
            });
            hasUserRedeemedTasks.push(async () =>
            {
                hasUserRedeemed_UniDaiLfi[i] = await contractDsecDistUniDaiLfi.methods.hasRedeemedDsec(currentAccount, i).call().catch((e) =>
                {
                    console.log(`Error contractDsecDistUniDaiLfi.hasRedeemedDsec: ${e.message}`);
                });
            });
        }
        await Promise.all(hasUserRedeemedTasks.map(p => p()));

        redeemableLFIArr_Dai = [], redeemableLFIArr_UniDaiLfi = [];
        totalRedeemableLFI_Dai = new BigNumber(0), totalRedeemableLFI_UniDaiLfi = new BigNumber(0);
        for(let i = 0; i < currentEpoch; i++)
        {
            if(!hasUserRedeemed_Dai[i])
            {
                calculateRewardTasks.push(async () =>
                {
                    let userReward = await contractDsecDistDai.methods.calculateRewardFor(currentAccount, i, rewardPerEpoch_Dai).call().catch((e) =>
                    {
                        console.log(`Error contractDsecDistDai.calculateRewardFor: ${e.message}`);
                    });
                    userReward = new BigNumber(userReward);
                    totalRedeemableLFI_Dai = totalRedeemableLFI_Dai.plus(userReward);
                    redeemableLFIArr_Dai[i] = userReward;
                });
            }
            else
            {
                redeemableLFIArr_Dai[i] = new BigNumber(0);
            }

            if(!hasUserRedeemed_UniDaiLfi[i])
            {
                calculateRewardTasks.push(async () =>
                {
                    let userReward = await contractDsecDistUniDaiLfi.methods.calculateRewardFor(currentAccount, i, rewardPerEpoch_UniDaiLfi).call().catch((e) =>
                    {
                        console.log(`Error contractDsecDistUniDaiLfi.calculateRewardFor: ${e.message}`);
                    });
                    userReward = new BigNumber(userReward);
                    totalRedeemableLFI_UniDaiLfi = totalRedeemableLFI_UniDaiLfi.plus(userReward);
                    redeemableLFIArr_UniDaiLfi[i] = userReward;
                });
            }
            else
            {
                redeemableLFIArr_UniDaiLfi[i] = new BigNumber(0);
            }
        }
        await Promise.all(calculateRewardTasks.map(p => p()));

        if(currentEpoch < totalNumberOfEpochs)
        {
            let estimatedLFIThisEpoch_Dai = await contractDsecDistDai.methods.estimateRewardForCurrentEpoch(currentAccount, rewardPerEpoch_Dai).call().catch((e) =>
            {
                console.log(`Error contractDsecDistDai.estimateRewardForCurrentEpoch: ${e.message}`);
            });
            estimatedLFIThisEpoch_Dai = new BigNumber(estimatedLFIThisEpoch_Dai);
            let estimatedLFIThisEpoch_UniDaiLfi = await contractDsecDistUniDaiLfi.methods.estimateRewardForCurrentEpoch(currentAccount, rewardPerEpoch_UniDaiLfi).call().catch((e) =>
            {
                console.log(`Error contractDsecDistDai.estimateRewardForCurrentEpoch: ${e.message}`);
            });
            estimatedLFIThisEpoch_UniDaiLfi = new BigNumber(estimatedLFIThisEpoch_UniDaiLfi);
            txtTokenLFIEstimated.textContent = estimatedLFIThisEpoch_Dai.plus(estimatedLFIThisEpoch_UniDaiLfi).div(eth).toFixed(8);
        }
        else
        {
            txtTokenLFIEstimated.textContent = "-NA-";
        }

        txtTokenLFIRedeemable.textContent = totalRedeemableLFI_Dai.plus(totalRedeemableLFI_UniDaiLfi).div(eth).toFixed(8);
        txtRedeemLFI_Dai.textContent = totalRedeemableLFI_Dai.div(eth).toFixed(8);
        txtRedeemLFI_UniDaiLfi.textContent = totalRedeemableLFI_UniDaiLfi.div(eth).toFixed(8);
        isEstimatingLFI = false;
    }

    async function updateEpochData()
    {
        currentEpoch = await contractDsecDistDai.methods.getCurrentEpoch().call().catch((e) =>
        {
            console.log(`Error getting current epoch: ${e.message}`);
        });
        currentEpoch = Number(currentEpoch);

        totalNumberOfEpochs = await contractDsecDistDai.methods.totalNumberOfEpochs().call().catch((e) =>
        {
            console.log(`Error getting totalNumberOfEpochs: ${e.message}`);
        });
        totalNumberOfEpochs = Number(totalNumberOfEpochs);

        if(currentEpoch >= totalNumberOfEpochs)
        {
            txtCurrentEpoch.textContent = i18next.t("ended");
            progressBarCurrentEpoch.style.width = "100%";
            progressBarCurrentEpoch.setAttribute("aria-valuenow", 100);
            progressBarCurrentEpoch.textContent = "100%";
            return;
        }

        let currentEpochStartEndTime = await contractDsecDistDai.methods.getStartEndTimestampsForEpoch(currentEpoch).call().catch((e) =>
        {
            console.log(`Error getting current epoch start/end timestamp: ${e.message}`);
        });
        currentEpochStartTime = parseInt(currentEpochStartEndTime["0"]);
        currentEpochEndTime = parseInt(currentEpochStartEndTime["1"]);

        let timeNow = Math.floor(Date.now() / 1000);
        let epochCompletedPercentage, timeDelay;
        if(timeNow < currentEpochStartTime)
        {
            txtCurrentEpoch.textContent = currentEpoch + " (not started)";
            txtNextEpoch.textContent = currentEpoch;
            txtNextEpochStartDate.textContent = new Date(currentEpochStartTime * 1000).toLocaleString("en-US");
            txtCurrentEpochEndIn.textContent = "-NA-";
            epochCompletedPercentage = currentEpoch == 0 ? 0 : 100;
            timeDelay = Math.min((currentEpochStartTime - timeNow) * 1000, 3600000);
        }
        else if(timeNow >= currentEpochStartTime && timeNow < currentEpochEndTime)
        {
            let nextEpoch = currentEpoch + 1;
            txtCurrentEpoch.textContent = currentEpoch;

            if(nextEpoch < totalNumberOfEpochs)
            {
                let nextEpochStartTime = await contractDsecDistDai.methods.getStartTimestampForEpoch(nextEpoch).call().catch((e) =>
                {
                    console.log(`Error getting next epoch start timestamp: ${e.message}`);
                });
                nextEpochStartTime = Number(nextEpochStartTime);
                txtNextEpoch.textContent = nextEpoch;
                txtNextEpochStartDate.textContent = new Date(nextEpochStartTime * 1000).toLocaleString("en-US");
            }
            else
            {
                txtNextEpoch.textContent = "-NA-";
                txtNextEpochStartDate.textContent = "-NA-";
            }

            let currentEpochTimeLeft = currentEpochEndTime - timeNow;
            if(currentEpochTimeLeft < 60)
            {
                txtCurrentEpochEndIn.textContent = currentEpochTimeLeft + "s";
                timeDelay = 5000;
            }
            else
            {
                let daysLeft = Math.floor(currentEpochTimeLeft / 86400);
                let hoursLeft = Math.floor((currentEpochTimeLeft - (daysLeft * 86400)) / 3600);
                let minsLeft = Math.floor((currentEpochTimeLeft - (daysLeft * 86400) - (hoursLeft * 3600)) / 60);
                txtCurrentEpochEndIn.textContent = daysLeft > 0 ? daysLeft + " day" + (daysLeft > 1 ? "s " : " ") : "";
                txtCurrentEpochEndIn.textContent += hoursLeft > 0 ? hoursLeft + " hr" + (hoursLeft > 1 ? "s " : " ") : "";
                txtCurrentEpochEndIn.textContent += minsLeft > 0 ? minsLeft + " min" + (minsLeft > 1 ? "s" : "") : "";
                timeDelay = 15000;
            }

            let epochDuration = currentEpochEndTime - currentEpochStartTime;
            epochCompletedPercentage = 100 - Math.floor(100 * currentEpochTimeLeft / epochDuration);
        }
        else
        {
            epochCompletedPercentage = 100;
            timeDelay = 1000;
        }

        //update current epoch progress bar
        progressBarCurrentEpoch.style.width = epochCompletedPercentage + "%";
        progressBarCurrentEpoch.setAttribute("aria-valuenow", epochCompletedPercentage);
        progressBarCurrentEpoch.textContent = epochCompletedPercentage + "%";

        setTimeout(updateEpochData, timeDelay);
    }

    //levf alert box
    function levfAlert(message, header, hide = false)
    {
        if(hide)
        {
            $("#levfAlertPopup").modal("hide");
            document.getElementById("txtLevfAlert").innerHTML = "";
        }
        else
        {
            //set header for alert box
            if(!header)
            {
                document.getElementById("txtLevfAlertHeader").textContent = "Levf Alert!";
            }
            else
            {
                document.getElementById("txtLevfAlertHeader").textContent = header;
            }
            //set message for alert box
            document.getElementById("txtLevfAlert").innerHTML = message;

            $("#levfAlertPopup").modal({keyboard: false}).modal("show");
        }
    }

    // show connect wallet modal
    function showConnectWalletPopup()
    {
        $("#modalConnectWallet").modal("show");
    }

    // connect wallet
    function connectWallet(walletName)
    {
        switch(walletName)
        {
            case "metamask":
                connectWeb3();
                break;
            case "fortmatic":
                break;
            case "authereum":
                break;
            case "coinbase":
                break;
            case "ledger":
                break;
            case "portis":
                break;
            case "squarelink":
                break;
            case "torus":
                break;
            case "trezor":
                break;
            case "trustwallet":
                break;
            case "walletconnect":
                break;
        }
    }

    //deposit treasury pool modal
    async function showTreasuryPoolDepositPopup(token)
    {
        if(!ethConnected)
        {
            showConnectWalletPopup();
            return;
        }

        let contractToken;
        txtTreasuryPoolGetTokenLink.textContent = "";
        switch(token)
        {
            case LiquidityPoolEnum.Dai:
                selectedTreasuryPoolDepositToken = LiquidityPoolEnum.Dai;
                imgTreasuryPoolDepositTitle.src = "assets/images/dai.png";
                contractToken = contractDAI;
                break;
            case LiquidityPoolEnum.UniDaiLfi:
                selectedTreasuryPoolDepositToken = LiquidityPoolEnum.UniDaiLfi;
                imgTreasuryPoolDepositTitle.src = "assets/images/uniswap.png";
                contractToken = contractUniDaiLfi;
                txtTreasuryPoolGetTokenLink.textContent = i18next.t("getUnderlyingAsset").format(selectedTreasuryPoolDepositToken);
                txtTreasuryPoolGetTokenLink.setAttribute("href", "https://app.uniswap.org/#/add/v2/" + addressDAI[chainInfo.shortName] + "/" + addressLFI[chainInfo.shortName]);
                break;
            default:
                selectedTreasuryPoolDepositToken = "";
                return;
        }

        //clear deposit amount
        txtTreasuryPoolDepositTitle.textContent = i18next.t("treasuryPoolDepositTitle").format(selectedTreasuryPoolDepositToken);
        txtTreasuryPoolAvailableToken.textContent = i18next.t("availableToken").format(selectedTreasuryPoolDepositToken);
        txtTreasuryPoolDepositToken.textContent = selectedTreasuryPoolDepositToken;
        txtTreasuryPoolDepositAmount.value = "0.00";
        treasuryPoolDepositBalance = await contractToken.methods.balanceOf(currentAccount).call().catch((e) =>
        {
             console.log(`Error ${token} treasuryPoolDepositBalance: ${e.message}`);
        });
        treasuryPoolDepositBalance = new BigNumber(treasuryPoolDepositBalance);
        txtTreasuryPoolDepositBalance.textContent = treasuryPoolDepositBalance.div(eth).toFixed(8) + " " + selectedTreasuryPoolDepositToken;

        $("#depositTreasuryPoolPopup").modal("show");
    }

    //deposit farming pool modal
    async function showFarmingPoolDepositPopup(adaptor)
    {
        if(!ethConnected)
        {
            showConnectWalletPopup();
            return;
        }

        let contractToken, contractTreasuryPool, contractFarmingPool;
        switch(adaptor)
        {
            case AdaptorEnum.DaiYearn:
                selectedFarmingPoolDepositToken = LiquidityPoolEnum.Dai;
                selectedFarmingPoolDepositAdaptor = AdaptorEnum.DaiYearn;
                contractToken = contractDAI;
                contractTreasuryPool = contractTreasuryPoolDai;
                contractFarmingPool = contractYearnDaiPool;
                break;
            default:
                selectedFarmingPoolDepositToken = "";
                selectedFarmingPoolDepositAdaptor = "";
                return;
        }

        //clear deposit amount
        txtFarmingPoolDepositTitle.textContent = i18next.t("farmingPoolDepositTitle").format(selectedFarmingPoolDepositToken, i18next.t(selectedFarmingPoolDepositAdaptor), yearnDaiBorrowerInterestRate.toString());
        txtFarmingPoolAvailableToken.textContent = i18next.t("availableToken").format(selectedFarmingPoolDepositToken);
        txtFarmingPoolDepositToken.textContent = selectedFarmingPoolDepositToken;
        txtFarmingPoolDepositAmount.value = "0.00";
        txtFarmingPoolBorrowAmount.value = "0.00";
        farmingPoolDepositBalance = await contractToken.methods.balanceOf(currentAccount).call().catch((e) =>
        {
             console.log(`Error ${token} farmingPoolDepositBalance: ${e.message}`);
        });
        farmingPoolDepositBalance = new BigNumber(farmingPoolDepositBalance);
        txtFarmingPoolDepositBalance.textContent = farmingPoolDepositBalance.div(eth).toFixed(8) + " " + selectedFarmingPoolDepositToken;

        let treasuryPoolAmtAvailable = await contractTreasuryPool.methods.getTotalUnderlyingAssetAvailable().call().catch((e) =>
        {
             console.log(`Error contractTreasuryPool.getTotalUnderlyingAssetAvailable: ${e.message}`);
        });
        treasuryPoolAmtAvailable = new BigNumber(treasuryPoolAmtAvailable);
        txtFarmingPoolBorrowableToken.textContent = i18next.t("availableTokenInTreasuryPool").format(selectedFarmingPoolDepositToken);
        txtFarmingPoolBorrowableTokenBalance.textContent = treasuryPoolAmtAvailable.div(eth).toFixed(8) + " " + selectedFarmingPoolDepositToken;

        $("#depositFarmingPoolPopup").modal("show");
    }

    //redeem treasury pool modal
    async function showTreasuryPoolRedeemPopup(token)
    {
        if(!ethConnected)
        {
            showConnectWalletPopup();
            return;
        }

        let contractLToken, textLtoken;
        switch(token)
        {
            case LiquidityPoolEnum.Dai:
                selectedTreasuryPoolRedeemToken = LiquidityPoolEnum.Dai;
                imgTreasuryPoolRedeemTitle.src = "assets/images/dai.png";
                contractLToken = contractLDai;
                textLtoken = "LDai";
                break;
            case LiquidityPoolEnum.UniDaiLfi:
                selectedTreasuryPoolRedeemToken = LiquidityPoolEnum.UniDaiLfi;
                imgTreasuryPoolRedeemTitle.src = "assets/images/uniswap.png";
                contractLToken = contractLUniDaiLfi;
                textLtoken = "DAI/LFI LUniLp";
                break;
            default:
                selectedTreasuryPoolRedeemToken = "";
                return;
        }

        //clear redeem amount
        txtTreasuryPoolRedeemTitle.textContent = i18next.t("redeemTokenTitle").format(selectedTreasuryPoolRedeemToken);
        txtTreasuryPoolHeldToken.textContent = i18next.t("tokenHeld").format(textLtoken);
        txtTreasuryPoolRedeemToken.textContent = selectedTreasuryPoolRedeemToken;
        txtTreasuryPoolRedeemAmount.value = "0.00";
        treasuryPoolRedeemBalance = await contractLToken.methods.balanceOf(currentAccount).call().catch((e) =>
        {
            console.log(`Error treasuryPoolRedeemBalance: ${e.message}`);
        });
        treasuryPoolRedeemBalance = new BigNumber(treasuryPoolRedeemBalance);
        txtTreasuryPoolRedeemBalance.textContent = treasuryPoolRedeemBalance.div(eth).toFixed(8) + " " + textLtoken;

        $("#redeemTreasuryPoolPopup").modal("show");
    }

    //redeem farming pool modal
    async function showFarmingPoolRedeemPopup(adaptor)
    {
        if(!ethConnected)
        {
            showConnectWalletPopup();
            return;
        }

        let contractBToken, textBtoken;
        switch(adaptor)
        {
            case AdaptorEnum.DaiYearn:
                selectedFarmingPoolRedeemToken = LiquidityPoolEnum.Dai;
                selectedFarmingPoolRedeemAdaptor = AdaptorEnum.DaiYearn;
                contractBToken = contractBDai;
                textBtoken = "BDai";
                break;
            default:
                selectedFarmingPoolRedeemToken = "";
                selectedFarmingPoolRedeemAdaptor = "";
                return;
        }

        //clear redeem amount
        txtFarmingPoolRedeemTitle.textContent = i18next.t("redeemTokenFromFarmingPoolTitle").format(selectedFarmingPoolRedeemToken, i18next.t(selectedFarmingPoolRedeemAdaptor));
        txtFarmingPoolHeldToken.textContent = i18next.t("tokenHeld").format(textBtoken);
        txtFarmingPoolRedeemToken.textContent = selectedFarmingPoolRedeemToken;
        txtFarmingPoolRedeemAmount.value = "0.00";
        farmingPoolRedeemBalance = await contractBToken.methods.balanceOf(currentAccount).call().catch((e) =>
        {
            console.log(`Error farmingPoolRedeemBalance: ${e.message}`);
        });
        farmingPoolRedeemBalance = new BigNumber(farmingPoolRedeemBalance);
        txtFarmingPoolRedeemBalance.textContent = farmingPoolRedeemBalance.div(eth).toFixed(8) + " " + textBtoken;

        $("#redeemFarmingPoolPopup").modal("show");
    }

    //redeem lfi modal
    async function showRedeemLfiPopup(token)
    {
        if(!ethConnected)
        {
            showConnectWalletPopup();
            return;
        }

        if(isEstimatingLFI)
        {
            swal({
                title: i18next.t("estimatingLfiTitle"),
                html: i18next.t("estimatingLfiContent"),
                imageUrl: "assets/images/levf.png",
                imageWidth: "84px"
            });
            return;
        }

        let totalRedeemableLFI, redeemableLFIArr;
        switch(token)
        {
            case LiquidityPoolEnum.Dai:
                selectedRedeemLfiToken = LiquidityPoolEnum.Dai;
                totalRedeemableLFI = totalRedeemableLFI_Dai;
                redeemableLFIArr = redeemableLFIArr_Dai;
                break;
            case LiquidityPoolEnum.UniDaiLfi:
                selectedRedeemLfiToken = LiquidityPoolEnum.UniDaiLfi;
                totalRedeemableLFI = totalRedeemableLFI_UniDaiLfi;
                redeemableLFIArr = redeemableLFIArr_UniDaiLfi;
                break;
            default:
                selectedRedeemLfiToken = "";
                return;
        }

        if(totalRedeemableLFI.isLessThanOrEqualTo(new BigNumber(0)) || currentEpoch <= 0)
        {
            swal({
                title: i18next.t("noRedeeemableLfiTitle"),
                html: i18next.t("noRedeeemableLfiContent"),
                imageUrl: "assets/images/levf.png",
                imageWidth: "84px"
            });
            return;
        }

        txtRedeemableLFI.textContent = totalRedeemableLFI.div(eth).toFixed(8) + " LFI";
        while(tblLFIRewardPerEpoch.lastChild)
        {
            tblLFIRewardPerEpoch.removeChild(tblLFIRewardPerEpoch.lastChild);
        }

        fromEpoch = toEpoch = -1;
        let tr, td, txt, b;
        for(let i = 0; i < redeemableLFIArr.length; i++)
        {
            if(redeemableLFIArr[i].isLessThanOrEqualTo(new BigNumber(0)))
            {
                continue;
            }
            else
            {
                if(fromEpoch < 0)
                {
                    fromEpoch = toEpoch = i;
                }
                else
                {
                    toEpoch = i;
                }
            }

            tr = document.createElement("tr");
            tblLFIRewardPerEpoch.appendChild(tr);

            //epoch
            td = document.createElement("td");
            b = document.createElement("b");
            td.appendChild(b);
            txt = document.createTextNode(i);
            b.appendChild(txt);
            tr.appendChild(td);

            //Lfi reward
            td = document.createElement("td");
            txt = document.createTextNode(redeemableLFIArr[i].div(eth).toFixed(8));
            td.appendChild(txt);
            tr.appendChild(td);
        }

        $("#redeemLfiPopup").modal("show");
    }

    function disableModalDepositButtons(disable)
    {
        //amount percentage buttons
        document.querySelectorAll(".amountPercent").forEach(button =>
        {
            button.disabled = disable;
        });

        //confirm loading circle
        if(disable)
        {
            btnTreasuryPoolAddLiquidity.firstElementChild.classList.remove("hide");
            btnFarmingPoolAddLiquidity.firstElementChild.classList.remove("hide");
        }
        else
        {
            btnTreasuryPoolAddLiquidity.firstElementChild.classList.add("hide");
            btnFarmingPoolAddLiquidity.firstElementChild.classList.add("hide");
        }

        //confirm/cancel buttons
        btnTreasuryPoolAddLiquidity.disabled = disable;
        btnTreasuryPoolCancelAddLiquidity.disabled = disable;
        btnTreasuryPoolCancelAddLiquidity2.disabled = disable;

        btnFarmingPoolAddLiquidity.disabled = disable;
        btnFarmingPoolCancelAddLiquidity.disabled = disable;
        btnFarmingPoolCancelAddLiquidity2.disabled = disable;
    }

    async function addTreasuryPoolLiquidity()
    {
        let contractToken, contractTreasuryPool, addressTreasuryPool;
        switch(selectedTreasuryPoolDepositToken)
        {
            case LiquidityPoolEnum.Dai:
                contractToken = contractDAI;
                contractTreasuryPool = contractTreasuryPoolDai;
                addressTreasuryPool = addressTreasuryPoolDai[chainInfo.shortName];
                break;
            case LiquidityPoolEnum.UniDaiLfi:
                contractToken = contractUniDaiLfi;
                contractTreasuryPool = contractTreasuryPoolUniDaiLfi;
                addressTreasuryPool = addressTreasuryPoolUniDaiLfi[chainInfo.shortName];
                break;
            default:
                return;
        }

        // VALIDATE AMOUNT
        let addAmount = new BigNumber(txtTreasuryPoolDepositAmount.value);
        //check that is a number, if not set to 0
        if(isNaN(addAmount)) addAmount = new BigNumber(0);
        //multiply by 1e18
        addAmount = addAmount.times(eth);
        //check that is greater than 0 and less than or equal to deposit balance
        if(addAmount.isLessThanOrEqualTo(new BigNumber(0)) || addAmount.isGreaterThan(treasuryPoolDepositBalance))
        {
            levfAlert(i18next.t("invalidAmountContent"), i18next.t("invalidAmountTitle"));
            return;
        }

        //get the allowance, if any, from previous add_liquidity
        let allowance = await contractToken.methods.allowance(currentAccount, addressTreasuryPool).call().catch((e) =>{
            console.log(`Error getting ${selectedTreasuryPoolDepositToken} allowance: ${e.message}`);
        });
        allowance = new BigNumber(allowance);

        //check if any needs to be approved (may not have to due to failed previous transaction)
        let approvalAmount = addAmount.minus(allowance);
        let tokenAmt = "0x0";
        try
        {
            tokenAmt = web3.utils.toBN("0x" + addAmount.toString(16));
        }
        catch(e)
        {
            console.log(e);
            levfAlert(i18next.t("invalidEntryContent"), i18next.t("invalidEntryTitle"));
            return;
        }
        disableModalDepositButtons(true);

         //if approvalAmount is more than 0 then need to approve that much
        if(approvalAmount.isGreaterThan(new BigNumber(0)))
        {
            swal({
                title: i18next.t("approveTitle").format(selectedTreasuryPoolDepositToken),
                html: i18next.t("approveContent").format(selectedTreasuryPoolDepositToken),
                showConfirmButton: false,
                imageUrl: "assets/images/levf.png",
                imageWidth: "84px"
            });

            //call base DAI to approve use of DAI for pool
            let failure = false;
            await contractToken.methods.approve(addressTreasuryPool, tokenAmt).send({
                from: currentAccount
            }).catch((e) =>
            {
                swal.close();
                console.log(`Error ${selectedTreasuryPoolDepositToken} approve: ${e.message}`);
                levfAlert(e.message.split(":")[0], i18next.t("approveErrorTitle"));
                failure = true;
            });
            if(failure)
            {
                disableModalDepositButtons(false);
                return;
            }
            swal.close();
            console.log("contractToken.methods.approve addressTreasuryPool: ", tokenAmt);
        }

        //add DAI to liquidity pool
        swal({
            title: i18next.t("depositTitle").format(selectedTreasuryPoolDepositToken),
            html: i18next.t("depositContent").format(selectedTreasuryPoolDepositToken),
            showConfirmButton: false,
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        failure = false;
        await contractTreasuryPool.methods.addLiquidity(tokenAmt).send({
            from: currentAccount
        }).catch((e) =>
        {
            swal.close();
            console.log(`Error contractTreasuryPool ${selectedTreasuryPoolDepositToken} add_liquidity: ${e.message}`);
            levfAlert(e.message.split(":")[0], i18next.t("addLiquidityErrorTitle"));
            failure = true;
        });
        if(failure)
        {
            disableModalDepositButtons(false);
            return;
        }
        swal.close();
        console.log("contractTreasuryPool.methods.add_liquidity ", tokenAmt);

        //get new balances
        await updateBalances();
        disableModalDepositButtons(false);

        swal({
            title: i18next.t("depositSuccessTitle"),
            html: i18next.t("depositSuccessContent").format(selectedTreasuryPoolDepositToken),
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        $("#depositTreasuryPoolPopup").modal("hide");
    }

    async function addFarmingPoolLiquidity()
    {
        let contractToken, contractTreasuryPool, contractFarmingPool, addressFarmingPool;
        switch(selectedFarmingPoolDepositAdaptor)
        {
            case AdaptorEnum.DaiYearn:
                contractToken = contractDAI;
                contractTreasuryPool = contractTreasuryPoolDai;
                contractFarmingPool = contractYearnDaiPool;
                addressFarmingPool = addressYearnDaiPool;
                break;
            default:
                return;
        }

        // check if sufficient liquidity in treasury pool
        let borrowAmount = new BigNumber(txtFarmingPoolBorrowAmount.value);
        borrowAmount = borrowAmount.times(eth);
        let availableLiquidity = await contractTreasuryPool.methods.getTotalUnderlyingAssetAvailable().call().catch((e) =>{
            console.log(`Error getting contractTreasuryPool.getTotalUnderlyingAssetAvailable: ${e.message}`);
        });
        availableLiquidity = new BigNumber(availableLiquidity);
        if(borrowAmount.isGreaterThan(availableLiquidity))
        {
            levfAlert(i18next.t("insufficientLiquidityContent").format(availableLiquidity.div(eth).toFixed(8), selectedFarmingPoolDepositToken), i18next.t("insufficientLiquidityTitle"));
            return;
        }

        // VALIDATE AMOUNT
        let addAmount = new BigNumber(txtFarmingPoolDepositAmount.value);
        //check that is a number, if not set to 0
        if(isNaN(addAmount)) addAmount = new BigNumber(0);
        //multiply by 1e18
        addAmount = addAmount.times(eth);
        //check that is greater than 0 and less than or equal to deposit balance
        if(addAmount.isLessThanOrEqualTo(new BigNumber(0)) || addAmount.isGreaterThan(farmingPoolDepositBalance))
        {
            levfAlert(i18next.t("invalidAmountContent"), i18next.t("invalidAmountTitle"));
            return;
        }

        //get the allowance, if any, from previous add_liquidity
        let allowance = await contractToken.methods.allowance(currentAccount, addressFarmingPool).call().catch((e) =>{
            console.log(`Error getting ${selectedFarmingPoolDepositToken} allowance: ${e.message}`);
        });
        allowance = new BigNumber(allowance);

        //check if any needs to be approved (may not have to due to failed previous transaction)
        let approvalAmount = addAmount.minus(allowance);
        let tokenAmt = "0x0";
        try
        {
            tokenAmt = web3.utils.toBN("0x" + addAmount.toString(16));
        }
        catch(e)
        {
            console.log(e);
            levfAlert(i18next.t("invalidEntryContent"), i18next.t("invalidEntryTitle"));
            return;
        }
        disableModalDepositButtons(true);

         //if approvalAmount is more than 0 then need to approve that much
        if(approvalAmount.isGreaterThan(new BigNumber(0)))
        {
            swal({
                title: i18next.t("approveTitle").format(selectedFarmingPoolDepositToken),
                html: i18next.t("approveContent").format(selectedFarmingPoolDepositToken),
                showConfirmButton: false,
                imageUrl: "assets/images/levf.png",
                imageWidth: "84px"
            });

            //call base DAI to approve use of DAI for pool
            let failure = false;
            await contractToken.methods.approve(addressFarmingPool, tokenAmt).send({
                from: currentAccount
            }).catch((e) =>
            {
                swal.close();
                console.log(`Error ${selectedFarmingPoolDepositToken} approve: ${e.message}`);
                levfAlert(e.message.split(":")[0], i18next.t("approveErrorTitle"));
                failure = true;
            });
            if(failure)
            {
                disableModalDepositButtons(false);
                return;
            }
            swal.close();
            console.log("contractToken.methods.approve addressFarmingPool: ", tokenAmt);
        }

        //add DAI to liquidity pool
        swal({
            title: i18next.t("depositTitle").format(selectedFarmingPoolDepositToken),
            html: i18next.t("depositContent").format(selectedFarmingPoolDepositToken),
            showConfirmButton: false,
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        failure = false;
        await contractFarmingPool.methods.addLiquidity(tokenAmt).send({
            from: currentAccount
        }).catch((e) =>
        {
            swal.close();
            console.log(`Error contractFarmingPool ${selectedFarmingPoolDepositToken} add_liquidity: ${e.message}`);
            levfAlert(e.message.split(":")[0], i18next.t("addLiquidityErrorTitle"));
            failure = true;
        });
        if(failure)
        {
            disableModalDepositButtons(false);
            return;
        }
        swal.close();
        console.log("contractFarmingPool.methods.add_liquidity ", tokenAmt);

        //get new balances
        await updateBalances();
        disableModalDepositButtons(false);

        swal({
            title: i18next.t("depositSuccessTitle"),
            html: i18next.t("depositSuccessContent").format(selectedFarmingPoolDepositToken),
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        $("#depositFarmingPoolPopup").modal("hide");
    }

    function disableModalRedeemButtons(disable)
    {
        //amount percentage buttons
        document.querySelectorAll(".amountPercent").forEach(button =>
        {
            button.disabled = disable;
        });

        //confirm loading circle
        if(disable)
        {
            btnTreasuryPoolRemoveLiquidity.firstElementChild.classList.remove("hide");
            btnFarmingPoolRemoveLiquidity.firstElementChild.classList.remove("hide");
        }
        else
        {
            btnTreasuryPoolRemoveLiquidity.firstElementChild.classList.add("hide");
            btnFarmingPoolRemoveLiquidity.firstElementChild.classList.add("hide");
        }

        //confirm/cancel buttons
        btnTreasuryPoolRemoveLiquidity.disabled = disable;
        btnTreasuryPoolCancelRemoveLiquidity.disabled = disable;
        btnTreasuryPoolCancelRemoveLiquidity2.disabled = disable;

        btnFarmingPoolRemoveLiquidity.disabled = disable;
        btnFarmingPoolCancelRemoveLiquidity.disabled = disable;
        btnFarmingPoolCancelRemoveLiquidity2.disabled = disable;
    }

    function disableLfiRedeemBtns(disable)
    {
        //confirm loading circle
        if(disable)
        {
            btnRedeemLfi.firstElementChild.classList.remove("hide");
        }
        else
        {
            btnRedeemLfi.firstElementChild.classList.add("hide");
        }

        //confirm/cancel buttons
        btnRedeemLfi.disabled = disable;
        btnCancelRedeemLfi.disabled = disable;
        btnCancelRedeemLfi2.disabled = disable;
    }

    async function removeTreasuryPoolLiquidity()
    {
        let contractTreasuryPool;
        switch(selectedTreasuryPoolRedeemToken)
        {
            case LiquidityPoolEnum.Dai:
                contractTreasuryPool = contractTreasuryPoolDai;
                break;
            case LiquidityPoolEnum.UniDaiLfi:
                contractTreasuryPool = contractTreasuryPoolUniDaiLfi;
                break;
            default:
                return;
        }

        //get amounts typed in
        let redeemAmount = new BigNumber(txtTreasuryPoolRedeemAmount.value);
         if(isNaN(redeemAmount)) redeemAmount = new BigNumber(0);
        redeemAmount = redeemAmount.times(eth);

         //set default amounts to 0
         let amountPrincipal = "0x0";
        if(redeemAmount.isLessThanOrEqualTo(new BigNumber(0)) || redeemAmount.isGreaterThan(treasuryPoolRedeemBalance))
        {
            levfAlert(i18next.t("invalidAmountContent"), i18next.t("invalidAmountTitle"));
            return;
        }

        try
        {
            amountPrincipal = web3.utils.toBN("0x" + (redeemAmount).toString(16));
            console.log("amountPrincipal:", amountPrincipal);
        }
        catch(e)
        {
            console.log(e);
            levfAlert(i18next.t("invalidEntryContent"), i18next.t("invalidEntryTitle"));
            return;
        }
        disableModalRedeemButtons(true);

        //remove liquidity from Treasury pool
        swal({
            title: i18next.t("redeemTitle").format(selectedTreasuryPoolRedeemToken),
            html: i18next.t("redeemContent"),
            showConfirmButton: false,
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        //remove liquidity
        let failure = false;
        await contractTreasuryPool.methods.removeLiquidity(amountPrincipal).send({
            from: currentAccount
        }).catch((e) =>
        {
            swal.close();
            console.log(`Error ${selectedTreasuryPoolRedeemToken} contractTreasuryPool.removeLiquidity: ${e.message}`);
            levfAlert(e.message.split(":")[0], i18next.t("removeLiquidityErrorTitle"));
            failure = true;
        });
        if(failure)
        {
            disableModalRedeemButtons(false);
            return;
        }
        swal.close();

        //get new balances
        await updateBalances();
        disableModalRedeemButtons(false);

        console.log("Redemption was successful!");
        swal({
            title: i18next.t("redeemSuccessTitle"),
            html: i18next.t("redeemSuccessContent"),
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        $("#redeemTreasuryPoolPopup").modal("hide");
    }

    async function removeFarmingPoolLiquidity()
    {
        let contractFarmingPool;
        switch(selectedFarmingPoolRedeemAdaptor)
        {
            case AdaptorEnum.DaiYearn:
                contractFarmingPool = contractYearnDaiPool;
                break;
            default:
                return;
        }

        //get amounts typed in
        let redeemAmount = new BigNumber(txtFarmingPoolRedeemAmount.value);
         if(isNaN(redeemAmount)) redeemAmount = new BigNumber(0);
        redeemAmount = redeemAmount.times(eth);

         //set default amounts to 0
         let amountPrincipal = "0x0";
        if(redeemAmount.isLessThanOrEqualTo(new BigNumber(0)) || redeemAmount.isGreaterThan(farmingPoolRedeemBalance))
        {
            levfAlert(i18next.t("invalidAmountContent"), i18next.t("invalidAmountTitle"));
            return;
        }

        try
        {
            amountPrincipal = web3.utils.toBN("0x" + (redeemAmount).toString(16));
            console.log("amountPrincipal:", amountPrincipal);
        }
        catch(e)
        {
            console.log(e);
            levfAlert(i18next.t("invalidEntryContent"), i18next.t("invalidEntryTitle"));
            return;
        }
        disableModalRedeemButtons(true);

        //remove liquidity from Farming pool
        swal({
            title: i18next.t("redeemTitle").format(selectedFarmingPoolRedeemToken),
            html: i18next.t("redeemContent"),
            showConfirmButton: false,
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        //remove liquidity
        let failure = false;
        await contractFarmingPool.methods.removeLiquidity(amountPrincipal).send({
            from: currentAccount
        }).catch((e) =>
        {
            swal.close();
            console.log(`Error ${selectedFarmingPoolRedeemToken} contractFarmingPool.removeLiquidity: ${e.message}`);
            levfAlert(e.message.split(":")[0], i18next.t("removeLiquidityErrorTitle"));
            failure = true;
        });
        if(failure)
        {
            disableModalRedeemButtons(false);
            return;
        }
        swal.close();

        //get new balances
        await updateBalances();
        disableModalRedeemButtons(false);

        console.log("Redemption was successful!");
        swal({
            title: i18next.t("redeemSuccessTitle"),
            html: i18next.t("redeemSuccessContent"),
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        $("#redeemFarmingPoolPopup").modal("hide");
    }

    async function redeemLfiReward()
    {
        let contractTreasuryPool, totalRedeemableLFI;
        switch(selectedRedeemLfiToken)
        {
            case LiquidityPoolEnum.Dai:
                contractTreasuryPool = contractTreasuryPoolDai;
                totalRedeemableLFI = totalRedeemableLFI_Dai;
                break;
            case LiquidityPoolEnum.UniDaiLfi:
                contractTreasuryPool = contractTreasuryPoolUniDaiLfi;
                totalRedeemableLFI = totalRedeemableLFI_UniDaiLfi;
                break;
            default:
                return;
        }

        if(totalRedeemableLFI.isLessThanOrEqualTo(new BigNumber(0)) || currentEpoch <= 0)
        {
            swal({
                title: i18next.t("noRedeeemableLfiTitle"),
                html: i18next.t("noRedeeemableLfiContent"),
                imageUrl: "assets/images/levf.png",
                imageWidth: "84px"
            });
            return;
        }

        disableLfiRedeemBtns(true);

        //redeem user LFI
        swal({
            title: i18next.t("redeemTitle").format("LFI"),
            html: i18next.t("redeemContent"),
            showConfirmButton: false,
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        let failure = false;
        await contractTreasuryPool.methods.redeemProviderReward(fromEpoch, toEpoch).send({
            from:currentAccount
        }).catch((e) =>
        {
            swal.close();
            console.log(`Error ${selectedRedeemLfiToken} contractTreasuryPool.redeemProviderReward: ${e.message}`);
            levfAlert(e.message.split(":")[0], i18next.t("redeemLfiErrorTitle"));
            failure = true;
        });
        if(failure)
        {
            disableLfiRedeemBtns(false);
            return;
        }
        swal.close();

        //get new balances
        await updateBalances();
        disableLfiRedeemBtns(false);

        console.log("Redemption was successful!");
        swal({
            title: i18next.t("redeemSuccessTitle"),
            html: i18next.t("redeemSuccessContent"),
            imageUrl: "assets/images/levf.png",
            imageWidth: "84px"
        });

        $("#redeemLfiPopup").modal("hide");
    }

    function closeMobileMenuIfActive()
    {
        if(mobileMenuBtn.offsetParent != null)
        {
            mobileMenuBtn.click();
        }
    }

    function copyToClipboard(text)
    {
        let copyText = "";
        switch(text)
        {
            case 'LFI':
                copyText = addressLFI[chainInfo.shortName];
                break;
        }
        let tmp = document.createElement('input');
        document.body.appendChild(tmp);
        tmp.value = copyText;
        tmp.select();
        document.execCommand('copy', false);
        tmp.remove();
    }

    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function(event)
    {
        if(!event.target.matches('.languageDropdownBtn'))
        {
            var dropdowns = document.getElementsByClassName("dropdownContent");
            for(let i = 0; i < dropdowns.length; i++)
            {
                var openDropdown = dropdowns[i];
                if(openDropdown.classList.contains('show'))
                {
                    openDropdown.classList.remove('show');
                }
            }
        }
    }

    function localizePage()
    {
        $('.rightbar').localize();
        $('#modalConnectWallet').localize();
        $('#depositTreasuryPoolPopup').localize();
        $('#redeemTreasuryPoolPopup').localize();
        $('#depositFarmingPoolPopup').localize();
        $('#redeemFarmingPoolPopup').localize();
        $('#redeemLfiPopup').localize();
        $('#levfAlertPopup').localize();

        infoEstimatedLfi.setAttribute('data-original-title', i18next.t("estimatedLfiPopoverTitle"));
        infoEstimatedLfi.setAttribute('data-content', i18next.t("estimatedLfiPopoverContent"));
        infoUniDaiLfi.setAttribute('data-original-title', i18next.t("uniDaiLfiPopoverTitle"));
        infoUniDaiLfi.setAttribute('data-content', i18next.t("uniDaiLfiPopoverContent").format("https://app.uniswap.org/#/add/v2" + (chainInfo ? "/" + addressDAI[chainInfo.shortName] + "/" + addressLFI[chainInfo.shortName] : "")));

        switch(i18next.language)
        {
            case "en":
                document.getElementById("languageBtn").textContent = "English ˅";
                break;
            case "zh_CN":
                document.getElementById("languageBtn").textContent = "中文(简体) ˅";
                break;
            default:
                document.getElementById("languageBtn").textContent = "English ˅";
                break;
        }
    }

    function setCookie(cookieName, cookieValue)
    {
        document.cookie = cookieName + "=" + cookieValue;
    }

    function getCookie(cookieName)
    {
        var name = cookieName + "=";
        var allCookieArray = document.cookie.split(';');
        for(var i=0; i < allCookieArray.length; i++)
        {
            var temp = allCookieArray[i].trim();
            if (temp.indexOf(name) == 0)
            {
                return temp.substring(name.length, temp.length);
            }
        }

        return null;
    }

    window.onload = init;

    </script>
    <!-- End js -->
</body>

</html>
